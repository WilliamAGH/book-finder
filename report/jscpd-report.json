{
  "statistics": {
    "detectionDate": "2025-09-21T03:51:37.062Z",
    "formats": {
      "java": {
        "sources": {
          "src/test/java/com/williamcallahan/book_recommendation_engine/test/config/TestBookCoverConfig.java": {
            "lines": 548,
            "tokens": 3903,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 31,
            "duplicatedTokens": 365,
            "percentage": 5.66,
            "percentageTokens": 9.35,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/test/config/TestApiConfig.java": {
            "lines": 240,
            "tokens": 1895,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 12,
            "duplicatedTokens": 124,
            "percentage": 5,
            "percentageTokens": 6.54,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/similarity/BookSimilarityServiceTest.java": {
            "lines": 336,
            "tokens": 2503,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 30,
            "duplicatedTokens": 223,
            "percentage": 8.93,
            "percentageTokens": 8.91,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/CoverSourceFetchingServiceTest.java": {
            "lines": 140,
            "tokens": 1407,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceTest.java": {
            "lines": 286,
            "tokens": 1786,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 16,
            "duplicatedTokens": 209,
            "percentage": 5.59,
            "percentageTokens": 11.7,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceSmokeTest.java": {
            "lines": 198,
            "tokens": 1254,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java": {
            "lines": 362,
            "tokens": 2718,
            "sources": 1,
            "clones": 12,
            "duplicatedLines": 134,
            "duplicatedTokens": 1491,
            "percentage": 37.02,
            "percentageTokens": 54.86,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/cache/GoogleBooksMockServiceCacheKeyTest.java": {
            "lines": 71,
            "tokens": 731,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/cache/BookApiProxyCacheKeyTest.java": {
            "lines": 97,
            "tokens": 840,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 40,
            "duplicatedTokens": 292,
            "percentage": 41.24,
            "percentageTokens": 34.76,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/controller/dto/BookDtoMapperTest.java": {
            "lines": 55,
            "tokens": 639,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/similarity/BookSimilarityService.java": {
            "lines": 196,
            "tokens": 2023,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 11,
            "duplicatedTokens": 143,
            "percentage": 5.61,
            "percentageTokens": 7.07,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/s3/S3FetchResult.java": {
            "lines": 138,
            "tokens": 627,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/s3/MoveActionSummary.java": {
            "lines": 65,
            "tokens": 575,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/s3/DryRunSummary.java": {
            "lines": 36,
            "tokens": 298,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/S3BookCoverService.java": {
            "lines": 618,
            "tokens": 6492,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 34,
            "duplicatedTokens": 461,
            "percentage": 5.5,
            "percentageTokens": 7.1,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/OpenLibraryServiceImpl.java": {
            "lines": 128,
            "tokens": 919,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 13,
            "duplicatedTokens": 136,
            "percentage": 10.16,
            "percentageTokens": 14.8,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/OpenLibraryService.java": {
            "lines": 15,
            "tokens": 28,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/LongitoodServiceImpl.java": {
            "lines": 142,
            "tokens": 1132,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 6,
            "duplicatedTokens": 72,
            "percentage": 4.23,
            "percentageTokens": 6.36,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/LongitoodService.java": {
            "lines": 14,
            "tokens": 28,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/LocalDiskCoverCacheService.java": {
            "lines": 431,
            "tokens": 3749,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 15,
            "duplicatedTokens": 167,
            "percentage": 3.48,
            "percentageTokens": 4.45,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/ImageProcessingService.java": {
            "lines": 279,
            "tokens": 2360,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/ExternalCoverService.java": {
            "lines": 26,
            "tokens": 90,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/CoverSourceFetchingService.java": {
            "lines": 903,
            "tokens": 9232,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 5,
            "duplicatedTokens": 74,
            "percentage": 0.55,
            "percentageTokens": 0.8,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/CoverCacheManager.java": {
            "lines": 190,
            "tokens": 993,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/BookImageOrchestrationService.java": {
            "lines": 186,
            "tokens": 1133,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementService.java": {
            "lines": 404,
            "tokens": 3806,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 11,
            "duplicatedTokens": 146,
            "percentage": 2.72,
            "percentageTokens": 3.84,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/event/SearchResultsUpdatedEvent.java": {
            "lines": 70,
            "tokens": 355,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/event/SearchProgressEvent.java": {
            "lines": 77,
            "tokens": 397,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/event/BookCoverUpdatedEvent.java": {
            "lines": 136,
            "tokens": 455,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/model/image/ProcessedImage.java": {
            "lines": 94,
            "tokens": 410,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/model/image/ImageSourceName.java": {
            "lines": 37,
            "tokens": 132,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/model/image/ImageResolutionPreference.java": {
            "lines": 95,
            "tokens": 184,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/model/image/ImageProvenanceData.java": {
            "lines": 414,
            "tokens": 1368,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/model/image/ImageDetails.java": {
            "lines": 207,
            "tokens": 805,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/model/image/ImageAttemptStatus.java": {
            "lines": 99,
            "tokens": 164,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/model/image/CoverImages.java": {
            "lines": 128,
            "tokens": 374,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/model/image/CoverImageSource.java": {
            "lines": 102,
            "tokens": 197,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/support/ErrorResponseUtils.java": {
            "lines": 26,
            "tokens": 189,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/dto/TagDto.java": {
            "lines": 6,
            "tokens": 44,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/dto/PublicationDto.java": {
            "lines": 9,
            "tokens": 57,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/dto/EditionDto.java": {
            "lines": 12,
            "tokens": 75,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/dto/CoverDto.java": {
            "lines": 11,
            "tokens": 71,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/dto/CollectionDto.java": {
            "lines": 8,
            "tokens": 53,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/dto/BookDtoMapper.java": {
            "lines": 149,
            "tokens": 1434,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/dto/BookDto.java": {
            "lines": 21,
            "tokens": 120,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/dto/AuthorDto.java": {
            "lines": 4,
            "tokens": 34,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/util/SearchQueryUtilsTest.java": {
            "lines": 44,
            "tokens": 305,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/util/PagingUtilsTest.java": {
            "lines": 46,
            "tokens": 528,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/util/IsbnUtilsTest.java": {
            "lines": 27,
            "tokens": 180,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/util/CompressionUtilsTest.java": {
            "lines": 49,
            "tokens": 441,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/testutil/PostgresFixturesTest.java": {
            "lines": 22,
            "tokens": 195,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/testutil/PostgresFixtures.java": {
            "lines": 62,
            "tokens": 542,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java": {
            "lines": 139,
            "tokens": 1857,
            "sources": 1,
            "clones": 13,
            "duplicatedLines": 85,
            "duplicatedTokens": 1245,
            "percentage": 61.15,
            "percentageTokens": 67.04,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecentlyViewedServiceTest.java": {
            "lines": 178,
            "tokens": 2070,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 65,
            "duplicatedTokens": 761,
            "percentage": 36.52,
            "percentageTokens": 36.76,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/PostgresBookReaderDedupeTest.java": {
            "lines": 163,
            "tokens": 1780,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 5,
            "duplicatedTokens": 62,
            "percentage": 3.07,
            "percentageTokens": 3.48,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksServiceTest.java": {
            "lines": 265,
            "tokens": 2089,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 54,
            "duplicatedTokens": 596,
            "percentage": 20.38,
            "percentageTokens": 28.53,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/DuplicateBookServiceTest.java": {
            "lines": 151,
            "tokens": 921,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookSupplementalPersistenceServiceTest.java": {
            "lines": 66,
            "tokens": 526,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 31,
            "duplicatedTokens": 337,
            "percentage": 46.97,
            "percentageTokens": 64.07,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookSitemapServiceTest.java": {
            "lines": 121,
            "tokens": 1297,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 13,
            "duplicatedTokens": 143,
            "percentage": 10.74,
            "percentageTokens": 11.03,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookRecommendationPersistenceServiceTest.java": {
            "lines": 106,
            "tokens": 977,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 8,
            "duplicatedTokens": 89,
            "percentage": 7.55,
            "percentageTokens": 9.11,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookDataOrchestratorPersistenceScenariosTest.java": {
            "lines": 199,
            "tokens": 1659,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 16,
            "duplicatedTokens": 191,
            "percentage": 8.04,
            "percentageTokens": 11.51,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookCollectionPersistenceServiceTest.java": {
            "lines": 81,
            "tokens": 763,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 10,
            "duplicatedTokens": 105,
            "percentage": 12.35,
            "percentageTokens": 13.76,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/service/ApiRequestMonitorTest.java": {
            "lines": 187,
            "tokens": 2145,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/scheduler/SitemapRefreshSchedulerTest.java": {
            "lines": 69,
            "tokens": 665,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 6,
            "duplicatedTokens": 71,
            "percentage": 8.7,
            "percentageTokens": 10.68,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/scheduler/SitemapRefreshSchedulerIntegrationTest.java": {
            "lines": 118,
            "tokens": 1178,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 11,
            "duplicatedTokens": 131,
            "percentage": 9.32,
            "percentageTokens": 11.12,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/scheduler/BookCacheWarmingSchedulerTest.java": {
            "lines": 85,
            "tokens": 777,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/controller/SitemapControllerTest.java": {
            "lines": 156,
            "tokens": 1714,
            "sources": 1,
            "clones": 3,
            "duplicatedLines": 19,
            "duplicatedTokens": 251,
            "percentage": 12.18,
            "percentageTokens": 14.64,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/controller/RobotsControllerTest.java": {
            "lines": 244,
            "tokens": 1282,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/controller/HomeControllerTest.java": {
            "lines": 283,
            "tokens": 2799,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 26,
            "duplicatedTokens": 280,
            "percentage": 9.19,
            "percentageTokens": 10,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/controller/BookControllerTest.java": {
            "lines": 211,
            "tokens": 2446,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 11,
            "duplicatedTokens": 144,
            "percentage": 5.21,
            "percentageTokens": 5.89,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/util/SlugGenerator.java": {
            "lines": 170,
            "tokens": 1217,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/util/SeoUtils.java": {
            "lines": 50,
            "tokens": 311,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/util/SearchQueryUtils.java": {
            "lines": 67,
            "tokens": 440,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/util/S3Paths.java": {
            "lines": 28,
            "tokens": 215,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/util/PagingUtils.java": {
            "lines": 61,
            "tokens": 389,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/util/JdbcUtils.java": {
            "lines": 55,
            "tokens": 287,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/util/IsbnUtils.java": {
            "lines": 32,
            "tokens": 180,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/util/ImageCacheUtils.java": {
            "lines": 250,
            "tokens": 1483,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 5,
            "duplicatedTokens": 126,
            "percentage": 2,
            "percentageTokens": 8.5,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/util/IdGenerator.java": {
            "lines": 71,
            "tokens": 588,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/util/EnumParsingUtils.java": {
            "lines": 42,
            "tokens": 298,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/util/CompressionUtils.java": {
            "lines": 68,
            "tokens": 477,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/util/BookJsonParser.java": {
            "lines": 595,
            "tokens": 5575,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/SitemapService.java": {
            "lines": 231,
            "tokens": 2689,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 18,
            "duplicatedTokens": 292,
            "percentage": 7.79,
            "percentageTokens": 10.86,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/S3StorageService.java": {
            "lines": 429,
            "tokens": 3583,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/S3RetryService.java": {
            "lines": 255,
            "tokens": 1934,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 5,
            "duplicatedTokens": 61,
            "percentage": 1.96,
            "percentageTokens": 3.15,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/S3CoverCleanupService.java": {
            "lines": 254,
            "tokens": 2291,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/RecommendationService.java": {
            "lines": 548,
            "tokens": 4937,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 14,
            "duplicatedTokens": 162,
            "percentage": 2.55,
            "percentageTokens": 3.28,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/RecentlyViewedService.java": {
            "lines": 452,
            "tokens": 3352,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/RecentBookViewRepository.java": {
            "lines": 167,
            "tokens": 1403,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 12,
            "duplicatedTokens": 232,
            "percentage": 7.19,
            "percentageTokens": 16.54,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/OpenLibraryBookDataService.java": {
            "lines": 352,
            "tokens": 3299,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 6,
            "duplicatedTokens": 71,
            "percentage": 1.7,
            "percentageTokens": 2.15,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/NewYorkTimesService.java": {
            "lines": 133,
            "tokens": 1031,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksService.java": {
            "lines": 510,
            "tokens": 3591,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 5,
            "duplicatedTokens": 61,
            "percentage": 0.98,
            "percentageTokens": 1.7,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksMockService.java": {
            "lines": 392,
            "tokens": 2698,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 11,
            "duplicatedTokens": 128,
            "percentage": 2.81,
            "percentageTokens": 4.74,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleApiFetcher.java": {
            "lines": 424,
            "tokens": 3553,
            "sources": 1,
            "clones": 7,
            "duplicatedLines": 86,
            "duplicatedTokens": 1037,
            "percentage": 20.28,
            "percentageTokens": 29.19,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/EnvironmentService.java": {
            "lines": 63,
            "tokens": 241,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/DuplicateBookService.java": {
            "lines": 89,
            "tokens": 362,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/CoverUpdateNotifierService.java": {
            "lines": 173,
            "tokens": 1487,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/CachingStrategy.java": {
            "lines": 97,
            "tokens": 247,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookSupplementalPersistenceService.java": {
            "lines": 193,
            "tokens": 1612,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 7,
            "duplicatedTokens": 68,
            "percentage": 3.63,
            "percentageTokens": 4.22,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookSitemapService.java": {
            "lines": 171,
            "tokens": 1760,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookSearchService.java": {
            "lines": 157,
            "tokens": 1409,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 16,
            "duplicatedTokens": 182,
            "percentage": 10.19,
            "percentageTokens": 12.92,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookRecommendationPersistenceService.java": {
            "lines": 146,
            "tokens": 1339,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookDataAggregatorService.java": {
            "lines": 251,
            "tokens": 2737,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 6,
            "duplicatedTokens": 70,
            "percentage": 2.39,
            "percentageTokens": 2.56,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookCollectionPersistenceService.java": {
            "lines": 193,
            "tokens": 1407,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 7,
            "duplicatedTokens": 68,
            "percentage": 3.63,
            "percentageTokens": 4.83,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookApiProxy.java": {
            "lines": 522,
            "tokens": 4172,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 11,
            "duplicatedTokens": 128,
            "percentage": 2.11,
            "percentageTokens": 3.07,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/ApiRequestMonitor.java": {
            "lines": 302,
            "tokens": 2424,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/service/ApiCircuitBreakerService.java": {
            "lines": 182,
            "tokens": 1378,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/scheduler/SitemapRefreshScheduler.java": {
            "lines": 109,
            "tokens": 1009,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/scheduler/NewYorkTimesBestsellerScheduler.java": {
            "lines": 258,
            "tokens": 2465,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/scheduler/BookCacheWarmingScheduler.java": {
            "lines": 227,
            "tokens": 1744,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/repository/SitemapRepository.java": {
            "lines": 196,
            "tokens": 1949,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 28,
            "duplicatedTokens": 262,
            "percentage": 14.29,
            "percentageTokens": 13.44,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/ThemePreferenceController.java": {
            "lines": 115,
            "tokens": 747,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/SitemapController.java": {
            "lines": 207,
            "tokens": 2383,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 16,
            "duplicatedTokens": 205,
            "percentage": 7.73,
            "percentageTokens": 8.6,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/RobotsController.java": {
            "lines": 75,
            "tokens": 442,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/ImageResolutionPreferenceController.java": {
            "lines": 48,
            "tokens": 206,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 6,
            "duplicatedTokens": 70,
            "percentage": 12.5,
            "percentageTokens": 33.98,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/HomeController.java": {
            "lines": 944,
            "tokens": 8947,
            "sources": 1,
            "clones": 6,
            "duplicatedLines": 49,
            "duplicatedTokens": 526,
            "percentage": 5.19,
            "percentageTokens": 5.88,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/ErrorDiagnosticsController.java": {
            "lines": 73,
            "tokens": 524,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/BookCoverPreferenceController.java": {
            "lines": 46,
            "tokens": 204,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 6,
            "duplicatedTokens": 70,
            "percentage": 13.04,
            "percentageTokens": 34.31,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/BookCoverController.java": {
            "lines": 265,
            "tokens": 2027,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/BookController.java": {
            "lines": 195,
            "tokens": 2128,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 8,
            "duplicatedTokens": 82,
            "percentage": 4.1,
            "percentageTokens": 3.85,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/ApiMetricsController.java": {
            "lines": 83,
            "tokens": 376,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/controller/AdminController.java": {
            "lines": 277,
            "tokens": 2290,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/WebSocketConfig.java": {
            "lines": 58,
            "tokens": 243,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/WebPageHealthIndicator.java": {
            "lines": 213,
            "tokens": 1336,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 10,
            "duplicatedTokens": 123,
            "percentage": 4.69,
            "percentageTokens": 9.21,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/WebConfig.java": {
            "lines": 65,
            "tokens": 353,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/WebClientConfig.java": {
            "lines": 58,
            "tokens": 368,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/SitemapProperties.java": {
            "lines": 115,
            "tokens": 580,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/SecurityConfig.java": {
            "lines": 178,
            "tokens": 1538,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/SearchPageHealthIndicator.java": {
            "lines": 83,
            "tokens": 675,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 5,
            "duplicatedTokens": 63,
            "percentage": 6.02,
            "percentageTokens": 9.33,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/S3HealthIndicator.java": {
            "lines": 78,
            "tokens": 784,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 5,
            "duplicatedTokens": 60,
            "percentage": 6.41,
            "percentageTokens": 7.65,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/S3EnvironmentCondition.java": {
            "lines": 46,
            "tokens": 329,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/S3Config.java": {
            "lines": 73,
            "tokens": 487,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/NoDatabaseConfig.java": {
            "lines": 51,
            "tokens": 172,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/GoogleBooksConfig.java": {
            "lines": 94,
            "tokens": 380,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/FeatureFlagConfig.java": {
            "lines": 53,
            "tokens": 152,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/DevModeConfig.java": {
            "lines": 122,
            "tokens": 841,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/DatabaseUrlEnvironmentPostProcessor.java": {
            "lines": 162,
            "tokens": 1442,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 75,
            "duplicatedTokens": 622,
            "percentage": 46.3,
            "percentageTokens": 43.13,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/CustomBasicAuthenticationEntryPoint.java": {
            "lines": 58,
            "tokens": 295,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/CacheComponentsConfig.java": {
            "lines": 56,
            "tokens": 369,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/AsyncConfig.java": {
            "lines": 83,
            "tokens": 400,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/config/AppRateLimiterConfig.java": {
            "lines": 100,
            "tokens": 545,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/java/com/williamcallahan/book_recommendation_engine/BookRecommendationEngineApplicationTests.java": {
            "lines": 37,
            "tokens": 100,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/RequestLoggingFilter.java": {
            "lines": 72,
            "tokens": 550,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/java/com/williamcallahan/book_recommendation_engine/BookRecommendationEngineApplication.java": {
            "lines": 258,
            "tokens": 2452,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 75,
            "duplicatedTokens": 622,
            "percentage": 29.07,
            "percentageTokens": 25.37,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 24287,
          "tokens": 195443,
          "sources": 144,
          "clones": 69,
          "duplicatedLines": 605,
          "duplicatedTokens": 6850,
          "percentage": 2.49,
          "percentageTokens": 3.5,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "json": {
        "sources": {
          "src/test/resources/mock-responses/searches/to_kill_a_mockingbird.json": {
            "lines": 110,
            "tokens": 631,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 97,
            "duplicatedTokens": 564,
            "percentage": 88.18,
            "percentageTokens": 89.38,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/resources/mock-responses/books/Hn41AgAAQBAJ.json": {
            "lines": 104,
            "tokens": 602,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 97,
            "duplicatedTokens": 564,
            "percentage": 93.27,
            "percentageTokens": 93.69,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/test/resources/fixtures/postgres/book_with_collections_and_tags.json": {
            "lines": 54,
            "tokens": 310,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/resources/META-INF/spring-configuration-metadata.json": {
            "lines": 534,
            "tokens": 2939,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".dev-cache/books/rCU3EAAAQBAJ.json": {
            "lines": 38,
            "tokens": 299,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".dev-cache/books/hRbo0AEACAAJ.json": {
            "lines": 39,
            "tokens": 309,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".dev-cache/books/h9F7DwAAQBAJ.json": {
            "lines": 37,
            "tokens": 291,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".dev-cache/books/Ur8fEQAAQBAJ.json": {
            "lines": 39,
            "tokens": 309,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".dev-cache/books/Su2pDwAAQBAJ.json": {
            "lines": 50,
            "tokens": 394,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".dev-cache/books/SkM5EQAAQBAJ.json": {
            "lines": 38,
            "tokens": 299,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "migration-logs/migration-summary-2025-09-20T06-25-48.json": {
            "lines": 59,
            "tokens": 317,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".vscode/settings.json": {
            "lines": 19,
            "tokens": 93,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".claude/settings.local.json": {
            "lines": 15,
            "tokens": 70,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "package.json": {
            "lines": 6,
            "tokens": 31,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 1142,
          "tokens": 6894,
          "sources": 14,
          "clones": 1,
          "duplicatedLines": 97,
          "duplicatedTokens": 564,
          "percentage": 8.49,
          "percentageTokens": 8.18,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "markup": {
        "sources": {
          "src/main/resources/templates/fragments/layout.html": {
            "lines": 171,
            "tokens": 1873,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/resources/templates/fragments/header.html": {
            "lines": 10,
            "tokens": 91,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/resources/templates/fragments/affiliate-dropdown.html": {
            "lines": 28,
            "tokens": 384,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/resources/static/images/placeholder-book-cover.svg": {
            "lines": 26,
            "tokens": 441,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/resources/templates/sitemap.html": {
            "lines": 147,
            "tokens": 1667,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/resources/templates/index.html": {
            "lines": 237,
            "tokens": 1908,
            "sources": 1,
            "clones": 4,
            "duplicatedLines": 72,
            "duplicatedTokens": 750,
            "percentage": 30.38,
            "percentageTokens": 39.31,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/resources/templates/error_diagnostics.html": {
            "lines": 20,
            "tokens": 276,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/resources/templates/book.html": {
            "lines": 574,
            "tokens": 4978,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/resources/wro.xml": {
            "lines": 12,
            "tokens": 84,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".idea/inspectionProfiles/Project_Default.xml": {
            "lines": 10,
            "tokens": 164,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".idea/dictionaries/project.xml": {
            "lines": 7,
            "tokens": 56,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".idea/workspace.xml": {
            "lines": 516,
            "tokens": 8939,
            "sources": 1,
            "clones": 10,
            "duplicatedLines": 74,
            "duplicatedTokens": 960,
            "percentage": 14.34,
            "percentageTokens": 10.74,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".idea/vcs.xml": {
            "lines": 5,
            "tokens": 48,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".idea/misc.xml": {
            "lines": 27,
            "tokens": 284,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".idea/jarRepositories.xml": {
            "lines": 34,
            "tokens": 414,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".idea/encodings.xml": {
            "lines": 6,
            "tokens": 66,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".idea/editorJumperProjectSettings.xml": {
            "lines": 5,
            "tokens": 48,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          ".idea/compiler.xml": {
            "lines": 33,
            "tokens": 364,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "pom.xml": {
            "lines": 533,
            "tokens": 3641,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "pmd-ruleset.xml": {
            "lines": 25,
            "tokens": 157,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 2426,
          "tokens": 25883,
          "sources": 20,
          "clones": 7,
          "duplicatedLines": 73,
          "duplicatedTokens": 855,
          "percentage": 3.01,
          "percentageTokens": 3.3,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "css": {
        "sources": {
          "src/main/resources/static/css/variables.css": {
            "lines": 218,
            "tokens": 1750,
            "sources": 1,
            "clones": 2,
            "duplicatedLines": 22,
            "duplicatedTokens": 200,
            "percentage": 10.09,
            "percentageTokens": 11.43,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 218,
          "tokens": 1750,
          "sources": 1,
          "clones": 1,
          "duplicatedLines": 11,
          "duplicatedTokens": 100,
          "percentage": 5.05,
          "percentageTokens": 5.71,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "markdown": {
        "sources": {
          "src/main/resources/uml/README.md": {
            "lines": 79,
            "tokens": 869,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "docs/task-retrofit-code-for-postgres-schema.md": {
            "lines": 444,
            "tokens": 6563,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "docs/schema_gap_analysis.md": {
            "lines": 206,
            "tokens": 1809,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "docs/migration_fixes_needed.md": {
            "lines": 120,
            "tokens": 995,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "docs/database_s3_object_schema_mapping.md": {
            "lines": 133,
            "tokens": 2028,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "docs/database_id_strategy.md": {
            "lines": 47,
            "tokens": 407,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "docs/cron-scheduler.md": {
            "lines": 48,
            "tokens": 785,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "README.md": {
            "lines": 178,
            "tokens": 1149,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "HELP.md": {
            "lines": 29,
            "tokens": 232,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "CLAUDE.md": {
            "lines": 45,
            "tokens": 903,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 45,
            "duplicatedTokens": 903,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "AGENTS.md": {
            "lines": 45,
            "tokens": 903,
            "sources": 1,
            "clones": 1,
            "duplicatedLines": 45,
            "duplicatedTokens": 903,
            "percentage": 100,
            "percentageTokens": 100,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 1374,
          "tokens": 16643,
          "sources": 11,
          "clones": 1,
          "duplicatedLines": 45,
          "duplicatedTokens": 903,
          "percentage": 3.28,
          "percentageTokens": 5.43,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "properties": {
        "sources": {
          "src/main/resources/wro.properties": {
            "lines": 3,
            "tokens": 18,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 3,
          "tokens": 18,
          "sources": 1,
          "clones": 0,
          "duplicatedLines": 0,
          "duplicatedTokens": 0,
          "percentage": 0,
          "percentageTokens": 0,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      },
      "yaml": {
        "sources": {
          "src/main/resources/application.yml": {
            "lines": 180,
            "tokens": 1012,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          },
          "src/main/resources/application-dev.yml": {
            "lines": 8,
            "tokens": 42,
            "sources": 1,
            "clones": 0,
            "duplicatedLines": 0,
            "duplicatedTokens": 0,
            "percentage": 0,
            "percentageTokens": 0,
            "newDuplicatedLines": 0,
            "newClones": 0
          }
        },
        "total": {
          "lines": 188,
          "tokens": 1054,
          "sources": 2,
          "clones": 0,
          "duplicatedLines": 0,
          "duplicatedTokens": 0,
          "percentage": 0,
          "percentageTokens": 0,
          "newDuplicatedLines": 0,
          "newClones": 0
        }
      }
    },
    "total": {
      "lines": 29638,
      "tokens": 247685,
      "sources": 193,
      "clones": 79,
      "duplicatedLines": 831,
      "duplicatedTokens": 9272,
      "percentage": 2.8,
      "percentageTokens": 3.74,
      "newDuplicatedLines": 0,
      "newClones": 0
    }
  },
  "duplicates": [
    {
      "format": "java",
      "lines": 10,
      "fragment": "e.getBookById(Mockito.eq(\"testbook123\")))\n            .thenAnswer(invocation -> {\n                Book testBook = new Book();\n                testBook.setId(\"testbook123\");\n                testBook.setTitle(\"Test Book Title\");\n                testBook.setAuthors(java.util.Collections.singletonList(\"Test Author\"));\n                testBook.setIsbn13(\"9781234567890\");\n                testBook.setCoverImageUrl(\"https://books.google.com/books/content?id=testbook123&printsec=frontcover&img=1&zoom=1\");\n                testBook.setRawJsonResponse(\"{\\\"kind\\\":\\\"books#volume\\\",\\\"id\\\":\\\"testbook123\\\"}\");\n  ",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/test/config/TestBookCoverConfig.java",
        "start": 522,
        "end": 531,
        "startLoc": {
          "line": 522,
          "column": 14,
          "position": 3737
        },
        "endLoc": {
          "line": 531,
          "column": 18,
          "position": 3832
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/test/config/TestBookCoverConfig.java",
        "start": 505,
        "end": 514,
        "startLoc": {
          "line": 505,
          "column": 16,
          "position": 3560
        },
        "endLoc": {
          "line": 514,
          "column": 8,
          "position": 3655
        }
      }
    },
    {
      "format": "java",
      "lines": 13,
      "fragment": "Id(\"test-id\");\n\n        // When & Then\n        StepVerifier.create(bookSimilarityService.generateEmbeddingReactive(book))\n            .assertNext(embedding -> {\n                assertThat(embedding).hasSize(384);\n                assertThat(embedding).containsOnly(0.0f);\n            })\n            .verifyComplete();\n    }\n\n    @Test\n    void createPlaceholderEmbedding_withNullText_retu",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/similarity/BookSimilarityServiceTest.java",
        "start": 263,
        "end": 275,
        "startLoc": {
          "line": 263,
          "column": 10,
          "position": 1947
        },
        "endLoc": {
          "line": 275,
          "column": 57,
          "position": 2023
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/similarity/BookSimilarityServiceTest.java",
        "start": 103,
        "end": 115,
        "startLoc": {
          "line": 103,
          "column": 5,
          "position": 642
        },
        "endLoc": {
          "line": 115,
          "column": 88,
          "position": 718
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": "package com.williamcallahan.book_recommendation_engine.service.image;\n\nimport com.williamcallahan.book_recommendation_engine.model.Book;\nimport com.williamcallahan.book_recommendation_engine.service.EnvironmentService;\nimport com.williamcallahan.book_recommendation_engine.service.event.BookCoverUpdatedEvent;\nimport com.williamcallahan.book_recommendation_engine.model",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java",
        "start": 15,
        "end": 20,
        "startLoc": {
          "line": 15,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 20,
          "column": 6,
          "position": 65
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceTest.java",
        "start": 15,
        "end": 20,
        "startLoc": {
          "line": 15,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 20,
          "column": 5,
          "position": 65
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": "oid testS3UploadFailure() throws Exception {\n        // ARRANGE\n        byte[] testImageBytes = new byte[] {1, 2, 3, 4, 5}; // Mock image data\n        \n        S3BookCoverService s3Service = mock(S3BookCoverService.class);\n        LocalDiskCoverCacheService diskService = mock(LocalDiskCoverCacheService.class);\n        CoverSourceFetchingService sourceFetchingService = mock(CoverSourceFetchingService.class",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java",
        "start": 168,
        "end": 174,
        "startLoc": {
          "line": 168,
          "column": 20,
          "position": 1171
        },
        "endLoc": {
          "line": 174,
          "column": 21,
          "position": 1264
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java",
        "start": 63,
        "end": 70,
        "startLoc": {
          "line": 63,
          "column": 23,
          "position": 337
        },
        "endLoc": {
          "line": 70,
          "column": 18,
          "position": 431
        }
      }
    },
    {
      "format": "java",
      "lines": 15,
      "fragment": "ed declaration\n        CoverCacheManager cacheManager = mock(CoverCacheManager.class);\n        ApplicationEventPublisher eventPublisher = mock(ApplicationEventPublisher.class);\n        EnvironmentService environmentService = mock(EnvironmentService.class);\n\n        BookCoverManagementService bookCoverManagementService = new BookCoverManagementService(\n            cacheManager, sourceFetchingService, s3Service, diskService, eventPublisher, environmentService\n        );\n        \n        Book testBook = createTestBook();\n        String identifierKey = ImageCacheUtils.getIdentifierKey(testBook);\n\n        when(environmentService.isBookCoverDebugMode()).thenReturn(true);\n        when(diskService.getLocalPlaceholderPath()).thenReturn(LOCAL_PLACEHOLDER_PATH);\n\n        Path tempDir = Files.createTempDirector",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java",
        "start": 175,
        "end": 189,
        "startLoc": {
          "line": 175,
          "column": 9,
          "position": 1267
        },
        "endLoc": {
          "line": 189,
          "column": 22,
          "position": 1420
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java",
        "start": 70,
        "end": 84,
        "startLoc": {
          "line": 70,
          "column": 9,
          "position": 431
        },
        "endLoc": {
          "line": 84,
          "column": 22,
          "position": 584
        }
      }
    },
    {
      "format": "java",
      "lines": 23,
      "fragment": "y(\"cover-cache-failure\");\n        try {\n            String cacheDirName = tempDir.getFileName().toString();\n            when(diskService.getCacheDirName()).thenReturn(cacheDirName);\n            when(diskService.getCacheDirString()).thenReturn(tempDir.toString());\n\n            Path localFile = tempDir.resolve(\"test-image.jpg\");\n            Files.write(localFile, testImageBytes);\n\n            ImageDetails localCacheImageDetails = new ImageDetails(\n                \"/\" + cacheDirName + \"/test-image.jpg\",\n                \"GOOGLE_BOOKS\",\n                \"test-image.jpg\",\n                CoverImageSource.LOCAL_CACHE,\n                ImageResolutionPreference.ORIGINAL,\n                500, 700\n            );\n\n            when(sourceFetchingService.getBestCoverImageUrlAsync(\n                    eq(testBook), anyString(), any(ImageProvenanceData.class)))\n                .thenReturn(CompletableFuture.completedFuture(localCacheImageDetai",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java",
        "start": 189,
        "end": 211,
        "startLoc": {
          "line": 189,
          "column": 22,
          "position": 1421
        },
        "endLoc": {
          "line": 211,
          "column": 5,
          "position": 1611
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java",
        "start": 84,
        "end": 106,
        "startLoc": {
          "line": 84,
          "column": 22,
          "position": 585
        },
        "endLoc": {
          "line": 106,
          "column": 13,
          "position": 775
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": "(localCacheImageDetails));\n            verify(eventPublisher, timeout(1000)).publishEvent(argThat(new ArgumentMatcher<BookCoverUpdatedEvent>() {\n                @Override\n                public boolean matches(BookCoverUpdatedEvent event) {\n                    return event.getIdentifierKey().equals(identifierKey) &&\n                           event.",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java",
        "start": 235,
        "end": 240,
        "startLoc": {
          "line": 235,
          "column": 23,
          "position": 1813
        },
        "endLoc": {
          "line": 240,
          "column": 23,
          "position": 1883
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java",
        "start": 140,
        "end": 146,
        "startLoc": {
          "line": 140,
          "column": 23,
          "position": 1034
        },
        "endLoc": {
          "line": 146,
          "column": 23,
          "position": 1105
        }
      }
    },
    {
      "format": "java",
      "lines": 16,
      "fragment": "ookCoverManagementService constructor\n        LocalDiskCoverCacheService diskService = mock(LocalDiskCoverCacheService.class);\n        CoverSourceFetchingService sourceFetchingService = mock(CoverSourceFetchingService.class);\n        CoverCacheManager cacheManager = mock(CoverCacheManager.class);\n        ApplicationEventPublisher eventPublisher = mock(ApplicationEventPublisher.class);\n        EnvironmentService environmentService = mock(EnvironmentService.class);\n\n        BookCoverManagementService bookCoverManagementService = new BookCoverManagementService(\n            cacheManager, sourceFetchingService, s3Service, diskService, eventPublisher, environmentService\n        );\n        \n        Book testBook = createTestBook();\n        String identifierKey = ImageCacheUtils.getIdentifierKey(testBook);\n        \n        when(environmentService.isBookCoverDebugMode()).thenReturn(true);\n        when(diskService.getLocalPlaceholderPath()).thenReturn(LOCAL_PLACEHOLDER_PATH);\n        // No need to mock getCacheDirName or getCacheDirStrin",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java",
        "start": 266,
        "end": 281,
        "startLoc": {
          "line": 266,
          "column": 9,
          "position": 1982
        },
        "endLoc": {
          "line": 281,
          "column": 101,
          "position": 2155
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java",
        "start": 68,
        "end": 84,
        "startLoc": {
          "line": 68,
          "column": 9,
          "position": 401
        },
        "endLoc": {
          "line": 84,
          "column": 5,
          "position": 574
        }
      }
    },
    {
      "format": "java",
      "lines": 21,
      "fragment": "etSearchRespectsCacheKeyFormat() {\n        ObjectMapper objectMapper = new ObjectMapper();\n        GoogleBooksService googleBooksService = mock(GoogleBooksService.class);\n        S3StorageService s3StorageService = mock(S3StorageService.class);\n        Optional<GoogleBooksMockService> mockService = Optional.empty();\n        BookDataOrchestrator bookDataOrchestrator = mock(BookDataOrchestrator.class);\n\n        BookApiProxy proxy = new BookApiProxy(\n                googleBooksService,\n                s3StorageService,\n                objectMapper,\n                mockService,\n                true,\n                tempDir.toString(),\n                false,\n                false,\n                false,\n                bookDataOrchestrator\n        );\n\n        String query ",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/cache/BookApiProxyCacheKeyTest.java",
        "start": 62,
        "end": 82,
        "startLoc": {
          "line": 62,
          "column": 32,
          "position": 523
        },
        "endLoc": {
          "line": 82,
          "column": 53,
          "position": 669
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/cache/BookApiProxyCacheKeyTest.java",
        "start": 29,
        "end": 49,
        "startLoc": {
          "line": 29,
          "column": 39,
          "position": 256
        },
        "endLoc": {
          "line": 49,
          "column": 14,
          "position": 402
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": ";\nimport com.williamcallahan.book_recommendation_engine.model.image.CoverImageSource;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageDetails;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageProvenanceData;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageResolutionPreference;\nimport com.williamcallahan.book_recommendation_engine.model",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/S3BookCoverService.java",
        "start": 19,
        "end": 24,
        "startLoc": {
          "line": 19,
          "column": 19,
          "position": 68
        },
        "endLoc": {
          "line": 24,
          "column": 6,
          "position": 138
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceS3UploadTest.java",
        "start": 19,
        "end": 24,
        "startLoc": {
          "line": 19,
          "column": 22,
          "position": 55
        },
        "endLoc": {
          "line": 24,
          "column": 5,
          "position": 125
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": "import org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.reactive.function.client.WebClient;\nimport software",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/S3BookCoverService.java",
        "start": 26,
        "end": 31,
        "startLoc": {
          "line": 26,
          "column": 1,
          "position": 146
        },
        "endLoc": {
          "line": 31,
          "column": 9,
          "position": 209
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/similarity/BookSimilarityService.java",
        "start": 18,
        "end": 23,
        "startLoc": {
          "line": 18,
          "column": 1,
          "position": 57
        },
        "endLoc": {
          "line": 23,
          "column": 8,
          "position": 120
        }
      }
    },
    {
      "format": "java",
      "lines": 8,
      "fragment": ";\n\nimport com.williamcallahan.book_recommendation_engine.model.Book;\nimport com.williamcallahan.book_recommendation_engine.model.image.CoverImageSource;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageDetails;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageResolutionPreference;\n\nimport org",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/OpenLibraryServiceImpl.java",
        "start": 13,
        "end": 20,
        "startLoc": {
          "line": 13,
          "column": 6,
          "position": 13
        },
        "endLoc": {
          "line": 20,
          "column": 4,
          "position": 77
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/test/config/TestApiConfig.java",
        "start": 14,
        "end": 19,
        "startLoc": {
          "line": 14,
          "column": 11,
          "position": 57
        },
        "endLoc": {
          "line": 19,
          "column": 4,
          "position": 119
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": "package com.williamcallahan.book_recommendation_engine.service.image;\n\nimport com.williamcallahan.book_recommendation_engine.model.Book;\nimport com.williamcallahan.book_recommendation_engine.model.image.CoverImageSource;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageDetails;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageResolutionPreference;\n// LongitoodService is in the same package; explicit import not required",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/LongitoodServiceImpl.java",
        "start": 13,
        "end": 19,
        "startLoc": {
          "line": 13,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 19,
          "column": 73,
          "position": 74
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/OpenLibraryServiceImpl.java",
        "start": 13,
        "end": 19,
        "startLoc": {
          "line": 13,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 19,
          "column": 7,
          "position": 117
        }
      }
    },
    {
      "format": "java",
      "lines": 9,
      "fragment": ";\n\nimport com.williamcallahan.book_recommendation_engine.model.image.CoverImageSource;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageAttemptStatus;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageDetails;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageProvenanceData;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageResolutionPreference;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageSourceName;\nimport com.williamcallahan.book_recommendation_engine.util",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/LocalDiskCoverCacheService.java",
        "start": 14,
        "end": 22,
        "startLoc": {
          "line": 14,
          "column": 6,
          "position": 13
        },
        "endLoc": {
          "line": 22,
          "column": 5,
          "position": 114
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/test/config/TestBookCoverConfig.java",
        "start": 25,
        "end": 32,
        "startLoc": {
          "line": 25,
          "column": 19,
          "position": 190
        },
        "endLoc": {
          "line": 32,
          "column": 8,
          "position": 290
        }
      }
    },
    {
      "format": "java",
      "lines": 8,
      "fragment": ";\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.reactive.function.client.WebClient;\n\nimport javax",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/LocalDiskCoverCacheService.java",
        "start": 25,
        "end": 32,
        "startLoc": {
          "line": 25,
          "column": 11,
          "position": 148
        },
        "endLoc": {
          "line": 32,
          "column": 6,
          "position": 214
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/S3BookCoverService.java",
        "start": 24,
        "end": 23,
        "startLoc": {
          "line": 24,
          "column": 15,
          "position": 143
        },
        "endLoc": {
          "line": 23,
          "column": 8,
          "position": 120
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": ";\nimport com.williamcallahan.book_recommendation_engine.model.image.CoverImageSource;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageAttemptStatus;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageDetails;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageProvenanceData;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageSourceName",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/CoverSourceFetchingService.java",
        "start": 15,
        "end": 20,
        "startLoc": {
          "line": 15,
          "column": 19,
          "position": 83
        },
        "endLoc": {
          "line": 20,
          "column": 16,
          "position": 157
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/test/config/TestBookCoverConfig.java",
        "start": 25,
        "end": 30,
        "startLoc": {
          "line": 25,
          "column": 19,
          "position": 190
        },
        "endLoc": {
          "line": 30,
          "column": 26,
          "position": 264
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": "package com.williamcallahan.book_recommendation_engine.service.image;\n\nimport com.williamcallahan.book_recommendation_engine.model.Book;\nimport com.williamcallahan.book_recommendation_engine.service.EnvironmentService;\nimport com.williamcallahan.book_recommendation_engine.service.event.BookCoverUpdatedEvent;\nimport com.williamcallahan.book_recommendation_engine.model.image.CoverImageSource;\nimport com.williamcallahan.book_recommendation_engine.model.image.CoverImages",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementService.java",
        "start": 13,
        "end": 19,
        "startLoc": {
          "line": 13,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 19,
          "column": 12,
          "position": 84
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceTest.java",
        "start": 15,
        "end": 21,
        "startLoc": {
          "line": 15,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 21,
          "column": 13,
          "position": 84
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": ";\nimport com.williamcallahan.book_recommendation_engine.model.image.CoverImageSource;\nimport com.williamcallahan.book_recommendation_engine.model.image.CoverImages;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageDetails;\nimport com.williamcallahan.book_recommendation_engine.model.image.ImageProvenanceData;\nimport com",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementService.java",
        "start": 17,
        "end": 22,
        "startLoc": {
          "line": 17,
          "column": 22,
          "position": 55
        },
        "endLoc": {
          "line": 22,
          "column": 4,
          "position": 119
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/image/BookCoverManagementServiceTest.java",
        "start": 20,
        "end": 25,
        "startLoc": {
          "line": 20,
          "column": 20,
          "position": 70
        },
        "endLoc": {
          "line": 25,
          "column": 4,
          "position": 134
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": ", \"en\", List.of(\"Author Two\"), List.of(\"Fiction\"));\n\n        when(bookDataOrchestrator.getBookByIdTiered(\"source\")).thenReturn(Mono.just(source));\n        when(bookDataOrchestrator.getBookBySlugTiered(\"source\")).thenReturn(Mono.empty());\n        when(bookDataOrchestrator.searchBooksTiered(anyString(), any(), anyInt(), any()))\n            .thenReturn(Mono.just(List.of()",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 68,
        "end": 73,
        "startLoc": {
          "line": 68,
          "column": 15,
          "position": 773
        },
        "endLoc": {
          "line": 73,
          "column": 2,
          "position": 879
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 47,
        "end": 52,
        "startLoc": {
          "line": 47,
          "column": 17,
          "position": 439
        },
        "endLoc": {
          "line": 52,
          "column": 14,
          "position": 545
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": "() {\n        recommendationService = createService(true);\n\n        Book source = buildBook(\"source\", \"en\", List.of(\"Author One\"), List.of(\"Fiction\"));\n        Book googleMatch = buildBook(\"google-match\", \"en\", List.of(\"Author Two\"), List.of(\"Fiction\"));\n\n        when(bookDataOrchestrator.getBookByIdTiered(\"source\")).thenReturn(Mono.empty",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 87,
        "end": 93,
        "startLoc": {
          "line": 87,
          "column": 66,
          "position": 1093
        },
        "endLoc": {
          "line": 93,
          "column": 6,
          "position": 1190
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 64,
        "end": 70,
        "startLoc": {
          "line": 64,
          "column": 57,
          "position": 714
        },
        "endLoc": {
          "line": 70,
          "column": 5,
          "position": 811
        }
      }
    },
    {
      "format": "java",
      "lines": 9,
      "fragment": "));\n        when(googleBooksService.searchBooksAsyncReactive(anyString(), any(), anyInt(), any()))\n            .thenReturn(Mono.just(List.of(googleMatch)));\n\n        StepVerifier.create(recommendationService.getSimilarBooks(\"source\", 3))\n            .expectNextMatches(results -> results.stream().anyMatch(book -> \"google-match\".equals(book.getId())))\n            .verifyComplete();\n\n        verify(googleBooksService",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 98,
        "end": 106,
        "startLoc": {
          "line": 98,
          "column": 7,
          "position": 1282
        },
        "endLoc": {
          "line": 106,
          "column": 19,
          "position": 1395
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 73,
        "end": 81,
        "startLoc": {
          "line": 73,
          "column": 2,
          "position": 880
        },
        "endLoc": {
          "line": 81,
          "column": 21,
          "position": 993
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": ");\n        verify(googleBooksService, atLeastOnce()).searchBooksAsyncReactive(anyString(), any(), anyInt(), any());\n        verify(recommendationPersistenceService, atLeastOnce()).persistPipelineRecommendations(any(), any());\n    }\n\n    @Test\n    void getSimilarBooks_returnsEmptyWhenFallbackDisabled",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 106,
        "end": 112,
        "startLoc": {
          "line": 106,
          "column": 9,
          "position": 1401
        },
        "endLoc": {
          "line": 112,
          "column": 49,
          "position": 1472
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 81,
        "end": 87,
        "startLoc": {
          "line": 81,
          "column": 2,
          "position": 1021
        },
        "endLoc": {
          "line": 87,
          "column": 66,
          "position": 1092
        }
      }
    },
    {
      "format": "java",
      "lines": 8,
      "fragment": "), List.of(\"Fiction\"));\n\n        when(bookDataOrchestrator.getBookByIdTiered(\"source\")).thenReturn(Mono.just(source));\n        when(bookDataOrchestrator.getBookBySlugTiered(\"source\")).thenReturn(Mono.empty());\n        when(bookDataOrchestrator.searchBooksTiered(anyString(), any(), anyInt(), any()))\n            .thenReturn(Mono.just(List.of()));\n\n        StepVerifier",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 113,
        "end": 120,
        "startLoc": {
          "line": 113,
          "column": 13,
          "position": 1498
        },
        "endLoc": {
          "line": 120,
          "column": 13,
          "position": 1601
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 47,
        "end": 74,
        "startLoc": {
          "line": 47,
          "column": 13,
          "position": 449
        },
        "endLoc": {
          "line": 74,
          "column": 5,
          "position": 885
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": "))\n            .verifyComplete();\n\n        verify(bookDataOrchestrator, atLeastOnce()).searchBooksTiered(anyString(), any(), anyInt(), any());\n        verify(googleBooksService, never()).searchBooksAsyncReactive(anyString(), any(), anyInt(), any());\n    }",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 121,
        "end": 126,
        "startLoc": {
          "line": 121,
          "column": 2,
          "position": 1624
        },
        "endLoc": {
          "line": 126,
          "column": 2,
          "position": 1704
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 55,
        "end": 60,
        "startLoc": {
          "line": 55,
          "column": 2,
          "position": 600
        },
        "endLoc": {
          "line": 60,
          "column": 7,
          "position": 680
        }
      }
    },
    {
      "format": "java",
      "lines": 12,
      "fragment": "package com.williamcallahan.book_recommendation_engine.service;\n\nimport com.williamcallahan.book_recommendation_engine.model.Book;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport reactor.core.publisher.Mono;\nimport reactor.test.StepVerifier;\n\nimport java.time.Instant;\nimport java.util.Date;\nimport java.util.List;\nimport java.util.Optional",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecentlyViewedServiceTest.java",
        "start": 1,
        "end": 12,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 12,
          "column": 9,
          "position": 105
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecommendationServiceTest.java",
        "start": 1,
        "end": 12,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 12,
          "column": 11,
          "position": 105
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": "() {\n        when(recentBookViewRepository.isEnabled()).thenReturn(false);\n\n        recentlyViewedService = createService(true);\n\n        when(bookDataOrchestrator.searchBooksTiered(anyString(), any(), anyInt(), any()))\n            .thenReturn(Mono.error",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecentlyViewedServiceTest.java",
        "start": 84,
        "end": 90,
        "startLoc": {
          "line": 84,
          "column": 48,
          "position": 911
        },
        "endLoc": {
          "line": 90,
          "column": 6,
          "position": 979
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecentlyViewedServiceTest.java",
        "start": 63,
        "end": 69,
        "startLoc": {
          "line": 63,
          "column": 53,
          "position": 641
        },
        "endLoc": {
          "line": 69,
          "column": 5,
          "position": 709
        }
      }
    },
    {
      "format": "java",
      "lines": 14,
      "fragment": ");\n        when(googleBooksService.searchBooksAsyncReactive(anyString(), any(), anyInt(), any()))\n            .thenReturn(Mono.just(List.of(googleBook)));\n\n        StepVerifier.create(recentlyViewedService.fetchDefaultBooksAsync())\n            .expectNextMatches(results -> results.size() == 1 && \"google-book\".equals(results.get(0).getId()))\n            .verifyComplete();\n\n        verify(bookDataOrchestrator).searchBooksTiered(anyString(), any(), anyInt(), any());\n        verify(googleBooksService).searchBooksAsyncReactive(anyString(), any(), anyInt(), any());\n    }\n\n    @Test\n    void fetchDefaultBooks_returnsEmptyWhenFallbackDisabled",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecentlyViewedServiceTest.java",
        "start": 92,
        "end": 105,
        "startLoc": {
          "line": 92,
          "column": 5,
          "position": 1005
        },
        "endLoc": {
          "line": 105,
          "column": 51,
          "position": 1181
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecentlyViewedServiceTest.java",
        "start": 71,
        "end": 84,
        "startLoc": {
          "line": 71,
          "column": 5,
          "position": 734
        },
        "endLoc": {
          "line": 84,
          "column": 48,
          "position": 910
        }
      }
    },
    {
      "format": "java",
      "lines": 9,
      "fragment": "))\n            .verifyComplete();\n\n        verify(bookDataOrchestrator).searchBooksTiered(anyString(), any(), anyInt(), any());\n        verify(googleBooksService, never()).searchBooksAsyncReactive(anyString(), any(), anyInt(), any());\n    }\n\n    @Test\n    void fetchDefaultBooks_usesRepositoryWhenAvailable",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecentlyViewedServiceTest.java",
        "start": 112,
        "end": 120,
        "startLoc": {
          "line": 112,
          "column": 2,
          "position": 1270
        },
        "endLoc": {
          "line": 120,
          "column": 46,
          "position": 1354
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/RecentlyViewedServiceTest.java",
        "start": 55,
        "end": 63,
        "startLoc": {
          "line": 55,
          "column": 2,
          "position": 556
        },
        "endLoc": {
          "line": 63,
          "column": 53,
          "position": 640
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": ";\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.node.ArrayNode;\nimport com.fasterxml.jackson.databind.node.ObjectNode;\nimport com.williamcallahan.book_recommendation_engine.model.Book;\nimport org",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksServiceTest.java",
        "start": 8,
        "end": 13,
        "startLoc": {
          "line": 8,
          "column": 9,
          "position": 25
        },
        "endLoc": {
          "line": 13,
          "column": 4,
          "position": 85
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/test/config/TestApiConfig.java",
        "start": 10,
        "end": 16,
        "startLoc": {
          "line": 10,
          "column": 7,
          "position": 13
        },
        "endLoc": {
          "line": 16,
          "column": 4,
          "position": 74
        }
      }
    },
    {
      "format": "java",
      "lines": 8,
      "fragment": "      // Mock the call to googleApiFetcherMock\n        when(googleApiFetcherMock.searchVolumesAuthenticated(eq(\"test query\"), anyInt(), eq(\"relevance\"), eq(\"en\")))\n                .thenReturn(Mono.just(mockApiResponse));\n        \n        Mono<List<Book>> result = googleBooksService.searchBooksAsyncReactive(\"test query\", \"en\", 10, \"relevance\");\n\n        StepVerifier.create(result)\n                .expectNext",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksServiceTest.java",
        "start": 139,
        "end": 146,
        "startLoc": {
          "line": 139,
          "column": 9,
          "position": 1001
        },
        "endLoc": {
          "line": 146,
          "column": 5,
          "position": 1089
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksServiceTest.java",
        "start": 111,
        "end": 118,
        "startLoc": {
          "line": 111,
          "column": 9,
          "position": 739
        },
        "endLoc": {
          "line": 118,
          "column": 6,
          "position": 826
        }
      }
    },
    {
      "format": "java",
      "lines": 13,
      "fragment": "meWithEmptyAuthors);\n        \n        mockApiResponse.set(\"items\", items);\n\n        // Mock the call to googleApiFetcherMock\n        when(googleApiFetcherMock.searchVolumesAuthenticated(eq(\"test query\"), anyInt(), eq(\"relevance\"), eq(\"en\")))\n                .thenReturn(Mono.just(mockApiResponse));\n\n        Mono<List<Book>> result = googleBooksService.searchBooksAsyncReactive(\"test query\", \"en\", 10, \"relevance\");\n\n        StepVerifier.create(result)\n                .expectNextMatches(books -> {\n        ",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksServiceTest.java",
        "start": 217,
        "end": 229,
        "startLoc": {
          "line": 217,
          "column": 23,
          "position": 1670
        },
        "endLoc": {
          "line": 229,
          "column": 13,
          "position": 1784
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksServiceTest.java",
        "start": 108,
        "end": 119,
        "startLoc": {
          "line": 108,
          "column": 2,
          "position": 722
        },
        "endLoc": {
          "line": 119,
          "column": 12,
          "position": 834
        }
      }
    },
    {
      "format": "java",
      "lines": 8,
      "fragment": ";\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.ArgumentCaptor;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\nimport reactor",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookSitemapServiceTest.java",
        "start": 6,
        "end": 13,
        "startLoc": {
          "line": 6,
          "column": 16,
          "position": 64
        },
        "endLoc": {
          "line": 13,
          "column": 8,
          "position": 140
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookSupplementalPersistenceServiceTest.java",
        "start": 3,
        "end": 10,
        "startLoc": {
          "line": 3,
          "column": 13,
          "position": 23
        },
        "endLoc": {
          "line": 10,
          "column": 4,
          "position": 99
        }
      }
    },
    {
      "format": "java",
      "lines": 9,
      "fragment": ";\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.ArgumentCaptor;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport reactor",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookRecommendationPersistenceServiceTest.java",
        "start": 4,
        "end": 12,
        "startLoc": {
          "line": 4,
          "column": 21,
          "position": 38
        },
        "endLoc": {
          "line": 12,
          "column": 8,
          "position": 127
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookSupplementalPersistenceServiceTest.java",
        "start": 3,
        "end": 11,
        "startLoc": {
          "line": 3,
          "column": 13,
          "position": 23
        },
        "endLoc": {
          "line": 11,
          "column": 4,
          "position": 112
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": ";\nimport com.williamcallahan.book_recommendation_engine.model.Book;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.ArgumentMatchers",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookDataOrchestratorPersistenceScenariosTest.java",
        "start": 4,
        "end": 9,
        "startLoc": {
          "line": 4,
          "column": 13,
          "position": 36
        },
        "endLoc": {
          "line": 9,
          "column": 17,
          "position": 98
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksServiceTest.java",
        "start": 11,
        "end": 16,
        "startLoc": {
          "line": 11,
          "column": 11,
          "position": 68
        },
        "endLoc": {
          "line": 16,
          "column": 5,
          "position": 130
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": ";\nimport org.mockito.junit.jupiter.MockitoExtension;\nimport org.springframework.dao.EmptyResultDataAccessException;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.jdbc.core.PreparedStatementSetter;\nimport org.springframework.jdbc.core.RowMapper",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookDataOrchestratorPersistenceScenariosTest.java",
        "start": 10,
        "end": 15,
        "startLoc": {
          "line": 10,
          "column": 5,
          "position": 108
        },
        "endLoc": {
          "line": 15,
          "column": 10,
          "position": 170
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/PostgresBookReaderDedupeTest.java",
        "start": 8,
        "end": 13,
        "startLoc": {
          "line": 8,
          "column": 8,
          "position": 88
        },
        "endLoc": {
          "line": 13,
          "column": 19,
          "position": 150
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": ";\n\nimport static org.assertj.core.api.Assertions.assertThat;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.ArgumentMatchers.anyString;\nimport static org.mockito.ArgumentMatchers.eq;\nimport static org.mockito.Mockito",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookDataOrchestratorPersistenceScenariosTest.java",
        "start": 22,
        "end": 28,
        "startLoc": {
          "line": 22,
          "column": 5,
          "position": 230
        },
        "endLoc": {
          "line": 28,
          "column": 8,
          "position": 297
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookSupplementalPersistenceServiceTest.java",
        "start": 13,
        "end": 19,
        "startLoc": {
          "line": 13,
          "column": 4,
          "position": 131
        },
        "endLoc": {
          "line": 19,
          "column": 17,
          "position": 198
        }
      }
    },
    {
      "format": "java",
      "lines": 11,
      "fragment": ";\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.ArgumentCaptor;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.jdbc.core.RowMapper;\n\nimport java.time",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookCollectionPersistenceServiceTest.java",
        "start": 4,
        "end": 14,
        "startLoc": {
          "line": 4,
          "column": 11,
          "position": 38
        },
        "endLoc": {
          "line": 14,
          "column": 5,
          "position": 143
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookSupplementalPersistenceServiceTest.java",
        "start": 3,
        "end": 13,
        "startLoc": {
          "line": 3,
          "column": 13,
          "position": 23
        },
        "endLoc": {
          "line": 13,
          "column": 5,
          "position": 128
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": ";\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\nimport org.springframework.beans",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/scheduler/SitemapRefreshSchedulerTest.java",
        "start": 10,
        "end": 16,
        "startLoc": {
          "line": 10,
          "column": 19,
          "position": 124
        },
        "endLoc": {
          "line": 16,
          "column": 6,
          "position": 195
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/similarity/BookSimilarityServiceTest.java",
        "start": 18,
        "end": 24,
        "startLoc": {
          "line": 18,
          "column": 21,
          "position": 53
        },
        "endLoc": {
          "line": 24,
          "column": 4,
          "position": 124
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": ";\nimport java.util.concurrent.CompletableFuture;\n\nimport static org.assertj.core.api.Assertions.assertThat;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.ArgumentMatchers.eq;\nimport static org.mockito.Mockito.verify",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/scheduler/SitemapRefreshSchedulerIntegrationTest.java",
        "start": 27,
        "end": 33,
        "startLoc": {
          "line": 27,
          "column": 9,
          "position": 293
        },
        "endLoc": {
          "line": 33,
          "column": 7,
          "position": 360
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/BookSitemapServiceTest.java",
        "start": 19,
        "end": 25,
        "startLoc": {
          "line": 19,
          "column": 4,
          "position": 193
        },
        "endLoc": {
          "line": 25,
          "column": 6,
          "position": 260
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": ";\nimport com.williamcallahan.book_recommendation_engine.service.SitemapService.AuthorSection;\nimport com.williamcallahan.book_recommendation_engine.service.SitemapService.BookSitemapItem;\nimport com.williamcallahan.book_recommendation_engine.service.SitemapService.PagedResult;\nimport com.williamcallahan.book_recommendation_engine.service.SitemapService.SitemapOverview;\nimport org",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/controller/SitemapControllerTest.java",
        "start": 5,
        "end": 10,
        "startLoc": {
          "line": 5,
          "column": 21,
          "position": 51
        },
        "endLoc": {
          "line": 10,
          "column": 4,
          "position": 115
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/scheduler/SitemapRefreshSchedulerIntegrationTest.java",
        "start": 11,
        "end": 16,
        "startLoc": {
          "line": 11,
          "column": 15,
          "position": 113
        },
        "endLoc": {
          "line": 16,
          "column": 4,
          "position": 177
        }
      }
    },
    {
      "format": "java",
      "lines": 14,
      "fragment": "));\n        when(bookDataOrchestrator.searchBooksTiered(anyString(), isNull(), anyInt(), isNull()))\n            .thenReturn(Mono.just(java.util.Collections.emptyList()));\n        // Act & Assert\n        webTestClient.get().uri(\"/\")\n            .accept(MediaType.TEXT_HTML)\n            .exchange()\n            .expectStatus().isOk()\n            .expectBody(String.class)\n            .value(body -> {\n                assertFalse(body.contains(\"NYT Bestseller\"));\n                assertFalse(body.contains(\"Recent Read\"));\n           ",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/controller/HomeControllerTest.java",
        "start": 271,
        "end": 284,
        "startLoc": {
          "line": 271,
          "column": 9,
          "position": 2659
        },
        "endLoc": {
          "line": 284,
          "column": 2,
          "position": 2799
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/controller/HomeControllerTest.java",
        "start": 249,
        "end": 265,
        "startLoc": {
          "line": 249,
          "column": 9,
          "position": 2461
        },
        "endLoc": {
          "line": 265,
          "column": 8,
          "position": 2603
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": ";\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/controller/BookControllerTest.java",
        "start": 14,
        "end": 19,
        "startLoc": {
          "line": 14,
          "column": 21,
          "position": 180
        },
        "endLoc": {
          "line": 19,
          "column": 4,
          "position": 246
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/controller/SitemapControllerTest.java",
        "start": 15,
        "end": 21,
        "startLoc": {
          "line": 15,
          "column": 10,
          "position": 193
        },
        "endLoc": {
          "line": 21,
          "column": 5,
          "position": 260
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": "if (url != null && url.contains(\".\")) {\n            int queryParamIndex = url.indexOf(\"?\");\n            String urlWithoutParams = queryParamIndex > 0 ? url.substring(0, queryParamIndex) : url;\n            int lastDotIndex = urlWithoutParams.lastIndexOf(\".\");\n            if (lastDotIndex > 0 && lastDotIndex < urlWithoutParams.length() - 1) {\n                String ext = urlWithoutParams.substring(lastDotIndex).toLowerCase(Locale",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/util/ImageCacheUtils.java",
        "start": 92,
        "end": 97,
        "startLoc": {
          "line": 92,
          "column": 9,
          "position": 366
        },
        "endLoc": {
          "line": 97,
          "column": 7,
          "position": 492
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/S3BookCoverService.java",
        "start": 480,
        "end": 485,
        "startLoc": {
          "line": 480,
          "column": 9,
          "position": 4808
        },
        "endLoc": {
          "line": 485,
          "column": 2,
          "position": 4934
        }
      }
    },
    {
      "format": "java",
      "lines": 10,
      "fragment": ".getHtmlPageSize();\n        int totalItems = countAuthorsByBucket().getOrDefault(bucket, 0);\n        if (totalItems == 0) {\n            return new PagedResult<>(Collections.emptyList(), safePage, 0, 0);\n        }\n        int totalPages = (int) Math.ceil((double) totalItems / pageSize);\n        if (safePage > totalPages) {\n            return new PagedResult<>(Collections.emptyList(), safePage, totalPages, totalItems);\n        }\n      ",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/SitemapService.java",
        "start": 76,
        "end": 85,
        "startLoc": {
          "line": 76,
          "column": 21,
          "position": 811
        },
        "endLoc": {
          "line": 85,
          "column": 11,
          "position": 957
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/SitemapService.java",
        "start": 56,
        "end": 65,
        "startLoc": {
          "line": 56,
          "column": 19,
          "position": 495
        },
        "endLoc": {
          "line": 65,
          "column": 6,
          "position": 641
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": "  return Flux.fromIterable(idsToFetch)\n                .flatMapSequential(this::fetchCanonicalBookSafe, 4, 8)\n                .filter(Objects::nonNull)\n                .filter(recommended -> sourceBook.getId() == null || !sourceBook.getId().equals(recommended.getId()))\n              ",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/RecommendationService.java",
        "start": 165,
        "end": 171,
        "startLoc": {
          "line": 165,
          "column": 23,
          "position": 1301
        },
        "endLoc": {
          "line": 171,
          "column": 2,
          "position": 1381
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/similarity/BookSimilarityService.java",
        "start": 116,
        "end": 121,
        "startLoc": {
          "line": 116,
          "column": 18,
          "position": 1021
        },
        "endLoc": {
          "line": 121,
          "column": 2,
          "position": 1099
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": "      FROM (\n                    SELECT book_id,\n                           MAX(viewed_at) AS last_viewed_at,\n                           COUNT(*) FILTER (WHERE viewed_at >= now() - INTERVAL '24 hours') AS views_24h,\n                           COUNT(*) FILTER (WHERE viewed_at >= now() - INTERVAL '7 days') AS views_7d,\n                           COUNT(*) FILTER (WHERE viewed_at >= now() - INTERVAL '30 days') AS views_30d\n                    FROM recent_book_views\n  ",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/RecentBookViewRepository.java",
        "start": 128,
        "end": 134,
        "startLoc": {
          "line": 128,
          "column": 21,
          "position": 1007
        },
        "endLoc": {
          "line": 134,
          "column": 10,
          "position": 1123
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/RecentBookViewRepository.java",
        "start": 80,
        "end": 86,
        "startLoc": {
          "line": 80,
          "column": 17,
          "position": 539
        },
        "endLoc": {
          "line": 86,
          "column": 8,
          "position": 655
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": ";\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.reactive.function.client.WebClient;\nimport reactor.core.publisher.Flux",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/OpenLibraryBookDataService.java",
        "start": 19,
        "end": 25,
        "startLoc": {
          "line": 19,
          "column": 12,
          "position": 70
        },
        "endLoc": {
          "line": 25,
          "column": 5,
          "position": 141
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/S3BookCoverService.java",
        "start": 24,
        "end": 23,
        "startLoc": {
          "line": 24,
          "column": 15,
          "position": 143
        },
        "endLoc": {
          "line": 23,
          "column": 5,
          "position": 126
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": "package com.williamcallahan.book_recommendation_engine.service;\n\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.node.ObjectNode;\nimport com.williamcallahan.book_recommendation_engine.model",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksMockService.java",
        "start": 23,
        "end": 28,
        "startLoc": {
          "line": 23,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 28,
          "column": 6,
          "position": 63
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/S3RetryService.java",
        "start": 10,
        "end": 15,
        "startLoc": {
          "line": 10,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 15,
          "column": 7,
          "position": 63
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": ";\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.reactive.function.client.WebClient;\nimport org",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleApiFetcher.java",
        "start": 16,
        "end": 22,
        "startLoc": {
          "line": 16,
          "column": 9,
          "position": 25
        },
        "endLoc": {
          "line": 22,
          "column": 4,
          "position": 90
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/image/S3BookCoverService.java",
        "start": 24,
        "end": 23,
        "startLoc": {
          "line": 24,
          "column": 15,
          "position": 143
        },
        "endLoc": {
          "line": 23,
          "column": 8,
          "position": 120
        }
      }
    },
    {
      "format": "java",
      "lines": 22,
      "fragment": " (Unauthenticated).\", bookId))\n                .timeout(Duration.ofSeconds(5)) // Add 5-second timeout to prevent blocking\n                .retryWhen(Retry.backoff(1, Duration.ofSeconds(1)) // Reduced retries for faster failure\n                        .filter(throwable -> {\n                            if (throwable instanceof WebClientResponseException wcre) {\n                                // Don't retry on 429 (rate limit) - fail fast instead\n                                return wcre.getStatusCode().is5xxServerError();\n                            }\n                            return throwable instanceof IOException || throwable instanceof WebClientRequestException;\n                        })\n                        .doBeforeRetry(retrySignal -> {\n                            String targetUrl = url; // Or a more generic endpoint description\n                            if (retrySignal.failure() instanceof WebClientResponseException wcre) {\n                                logger.warn(\"Retrying API call to {} after status {}. Attempt #{}. Error: {}\",\n                                        targetUrl, wcre.getStatusCode(), retrySignal.totalRetries() + 1, wcre.getMessage());\n                            } else {\n                                logger.warn(\"Retrying API call to {} after error. Attempt #{}. Error: {}\",\n                                        targetUrl, retrySignal.totalRetries() + 1, retrySignal.failure().getMessage());\n                            }\n                        })\n                        .onRetryExhaustedThrow((retryBackoffSpec, retrySignal) -> {\n                            logger.error(\"All retries failed for Unauthenticated API call for book ",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleApiFetcher.java",
        "start": 174,
        "end": 195,
        "startLoc": {
          "line": 174,
          "column": 54,
          "position": 1375
        },
        "endLoc": {
          "line": 195,
          "column": 79,
          "position": 1634
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleApiFetcher.java",
        "start": 100,
        "end": 121,
        "startLoc": {
          "line": 100,
          "column": 52,
          "position": 664
        },
        "endLoc": {
          "line": 121,
          "column": 77,
          "position": 923
        }
      }
    },
    {
      "format": "java",
      "lines": 14,
      "fragment": "all ({}) for query: {}, startIndex: {}\", authStatus, query, startIndex))\n                .timeout(Duration.ofSeconds(5)) // Add 5-second timeout to prevent blocking\n                .retryWhen(Retry.backoff(1, Duration.ofSeconds(1)) // Reduced retries for faster failure\n                        .filter(throwable -> {\n                            if (throwable instanceof WebClientResponseException wcre) {\n                                // Don't retry on 429 (rate limit) - fail fast instead\n                                return wcre.getStatusCode().is5xxServerError();\n                            }\n                            return throwable instanceof IOException || throwable instanceof WebClientRequestException;\n                        })\n                        .doBeforeRetry(retrySignal -> {\n                            String targetUrl = url; // Or a more generic endpoint description\n                            if (retrySignal.failure() instanceof WebClientResponseException wcre) {\n                                logger.warn(\"Retryi",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleApiFetcher.java",
        "start": 338,
        "end": 351,
        "startLoc": {
          "line": 338,
          "column": 11,
          "position": 2825
        },
        "endLoc": {
          "line": 351,
          "column": 78,
          "position": 2978
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleApiFetcher.java",
        "start": 100,
        "end": 113,
        "startLoc": {
          "line": 100,
          "column": 7,
          "position": 667
        },
        "endLoc": {
          "line": 113,
          "column": 66,
          "position": 820
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": "{}\",\n                                    authStatus, query, startIndex, retrySignal.failure().getMessage());\n                            apiRequestMonitor.recordFailedRequest(endpoint, \"All retries failed: \" + retrySignal.failure().getMessage());\n                            return retrySignal.failure();\n                        }))\n                .doOnSuccess(response -> {\n                    apiRe",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleApiFetcher.java",
        "start": 360,
        "end": 366,
        "startLoc": {
          "line": 360,
          "column": 11,
          "position": 3098
        },
        "endLoc": {
          "line": 366,
          "column": 3,
          "position": 3172
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleApiFetcher.java",
        "start": 121,
        "end": 127,
        "startLoc": {
          "line": 121,
          "column": 7,
          "position": 927
        },
        "endLoc": {
          "line": 127,
          "column": 22,
          "position": 1001
        }
      }
    },
    {
      "format": "java",
      "lines": 9,
      "fragment": "}\n\n    public List<AuthorResult> searchAuthors(String query, Integer limit) {\n        if (jdbcTemplate == null) {\n            return List.of();\n        }\n        String sanitizedQuery = normaliseQuery(query);\n        int safeLimit = safeLimit(limit != null ? limit : DEFAULT_LIMIT);\n        try {\n            return jdbcTemplate.query(\n          ",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookSearchService.java",
        "start": 88,
        "end": 96,
        "startLoc": {
          "line": 88,
          "column": 14,
          "position": 814
        },
        "endLoc": {
          "line": 96,
          "column": 37,
          "position": 905
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookSearchService.java",
        "start": 32,
        "end": 40,
        "startLoc": {
          "line": 32,
          "column": 12,
          "position": 270
        },
        "endLoc": {
          "line": 40,
          "column": 35,
          "position": 361
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": "package com.williamcallahan.book_recommendation_engine.service;\n\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.node.ArrayNode;\nimport com.fasterxml.jackson.databind.node.ObjectNode;\nimport org",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookDataAggregatorService.java",
        "start": 14,
        "end": 20,
        "startLoc": {
          "line": 14,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 20,
          "column": 4,
          "position": 72
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksServiceTest.java",
        "start": 6,
        "end": 12,
        "startLoc": {
          "line": 6,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 12,
          "column": 4,
          "position": 72
        }
      }
    },
    {
      "format": "java",
      "lines": 8,
      "fragment": ";\nimport com.williamcallahan.book_recommendation_engine.util.IdGenerator;\nimport com.williamcallahan.book_recommendation_engine.util.JdbcUtils;\nimport org.springframework.dao.DataAccessException;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.stereotype.Service;\n\nimport java.time",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookCollectionPersistenceService.java",
        "start": 3,
        "end": 10,
        "startLoc": {
          "line": 3,
          "column": 9,
          "position": 23
        },
        "endLoc": {
          "line": 10,
          "column": 5,
          "position": 91
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookSupplementalPersistenceService.java",
        "start": 3,
        "end": 10,
        "startLoc": {
          "line": 3,
          "column": 13,
          "position": 23
        },
        "endLoc": {
          "line": 10,
          "column": 5,
          "position": 91
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": "package com.williamcallahan.book_recommendation_engine.service;\n\nimport com.fasterxml.jackson.databind.JsonNode;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.williamcallahan.book_recommendation_engine.model.Book;\nimport com.williamcallahan.book_recommendation_engine.util.SearchQueryUtils",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookApiProxy.java",
        "start": 13,
        "end": 18,
        "startLoc": {
          "line": 13,
          "column": 1,
          "position": 3
        },
        "endLoc": {
          "line": 18,
          "column": 17,
          "position": 64
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksService.java",
        "start": 17,
        "end": 22,
        "startLoc": {
          "line": 17,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 22,
          "column": 15,
          "position": 63
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": ";\nimport com.williamcallahan.book_recommendation_engine.model.Book;\nimport com.williamcallahan.book_recommendation_engine.util.SearchQueryUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.cache",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/BookApiProxy.java",
        "start": 16,
        "end": 22,
        "startLoc": {
          "line": 16,
          "column": 13,
          "position": 39
        },
        "endLoc": {
          "line": 22,
          "column": 6,
          "position": 106
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/GoogleBooksMockService.java",
        "start": 27,
        "end": 33,
        "startLoc": {
          "line": 27,
          "column": 11,
          "position": 53
        },
        "endLoc": {
          "line": 33,
          "column": 8,
          "position": 120
        }
      }
    },
    {
      "format": "java",
      "lines": 15,
      "fragment": "SELECT \" + expr + \" AS bucket, COUNT(*) AS total FROM authors GROUP BY bucket\";\n        try {\n            return jdbcTemplate.query(sql, rs -> {\n                Map<String, Integer> counts = new LinkedHashMap<>();\n                while (rs.next()) {\n                    counts.put(rs.getString(\"bucket\").toUpperCase(Locale.ROOT), rs.getInt(\"total\"));\n                }\n                return counts;\n            });\n        } catch (DataAccessException e) {\n ",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/repository/SitemapRepository.java",
        "start": 121,
        "end": 135,
        "startLoc": {
          "line": 121,
          "column": 61,
          "position": 1066
        },
        "endLoc": {
          "line": 135,
          "column": 22,
          "position": 1197
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/repository/SitemapRepository.java",
        "start": 65,
        "end": 79,
        "startLoc": {
          "line": 65,
          "column": 41,
          "position": 491
        },
        "endLoc": {
          "line": 79,
          "column": 20,
          "position": 622
        }
      }
    },
    {
      "format": "java",
      "lines": 10,
      "fragment": "package com.williamcallahan.book_recommendation_engine.controller;\n\nimport com.williamcallahan.book_recommendation_engine.config.SitemapProperties;\nimport com.williamcallahan.book_recommendation_engine.service.SitemapService;\nimport com.williamcallahan.book_recommendation_engine.service.SitemapService.AuthorListingXmlItem;\nimport com.williamcallahan.book_recommendation_engine.service.SitemapService.AuthorSection;\nimport com.williamcallahan.book_recommendation_engine.service.SitemapService.BookSitemapItem;\nimport com.williamcallahan.book_recommendation_engine.service.SitemapService.PagedResult;\nimport com.williamcallahan.book_recommendation_engine.service.SitemapService.SitemapOverview;\nimport com.williamcallahan.book_recommendation_engine.util",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/controller/SitemapController.java",
        "start": 1,
        "end": 10,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 10,
          "column": 5,
          "position": 121
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/controller/SitemapControllerTest.java",
        "start": 1,
        "end": 16,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 16,
          "column": 8,
          "position": 183
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": "package com.williamcallahan.book_recommendation_engine.controller;\n\nimport com.williamcallahan.book_recommendation_engine.model.Book;\nimport com.williamcallahan.book_recommendation_engine.model.image.CoverImageSource;\nimport com.williamcallahan.book_recommendation_engine.model.image.CoverImages;\nimport com.williamcallahan.book_recommendation_engine.service.BookDataOrchestrator;\nimport com.williamcallahan.book_recommendation_engine.service.DuplicateBookService",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/controller/HomeController.java",
        "start": 15,
        "end": 21,
        "startLoc": {
          "line": 15,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 21,
          "column": 21,
          "position": 80
        }
      },
      "secondFile": {
        "name": "src/test/java/com/williamcallahan/book_recommendation_engine/controller/BookControllerTest.java",
        "start": 1,
        "end": 7,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 7,
          "column": 19,
          "position": 78
        }
      }
    },
    {
      "format": "java",
      "lines": 8,
      "fragment": ";\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.PathVariable;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.slf4j",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/controller/HomeController.java",
        "start": 32,
        "end": 39,
        "startLoc": {
          "line": 32,
          "column": 11,
          "position": 228
        },
        "endLoc": {
          "line": 39,
          "column": 6,
          "position": 312
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/controller/SitemapController.java",
        "start": 12,
        "end": 19,
        "startLoc": {
          "line": 12,
          "column": 10,
          "position": 146
        },
        "endLoc": {
          "line": 19,
          "column": 16,
          "position": 230
        }
      }
    },
    {
      "format": "java",
      "lines": 11,
      "fragment": ">> processedRecentBooksMono = recentBooksMono\n            .flatMap(this::processBooksCovers)\n            .map(bookList -> bookList.stream()\n                .filter(this::isActualCover)\n                .collect(Collectors.toList())\n            )\n            .map(this::deduplicateBooksById)\n            .map(bookList -> {\n                bookList.forEach(duplicateBookService::populateDuplicateEditions);\n                retur",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/controller/HomeController.java",
        "start": 244,
        "end": 254,
        "startLoc": {
          "line": 244,
          "column": 13,
          "position": 1979
        },
        "endLoc": {
          "line": 254,
          "column": 7,
          "position": 2074
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/controller/HomeController.java",
        "start": 182,
        "end": 192,
        "startLoc": {
          "line": 182,
          "column": 13,
          "position": 1327
        },
        "endLoc": {
          "line": 192,
          "column": 12,
          "position": 1422
        }
      }
    },
    {
      "format": "java",
      "lines": 9,
      "fragment": "                                       : \"https://findmybook.net/images/og-logo.png\";\n                        model.addAttribute(\"ogImage\", errorOgImage);\n\n                        String canonicalIdentifier = book.getSlug() != null && !book.getSlug().isBlank()\n                            ? book.getSlug()\n                            : book.getId();\n                        model.addAttribute(\"canonicalUrl\", \"https://findmybook.net/book/\" + canonicalIdentifier);\n                        model.addAttribute(\"keywords\", ge",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/controller/HomeController.java",
        "start": 600,
        "end": 608,
        "startLoc": {
          "line": 600,
          "column": 13,
          "position": 5690
        },
        "endLoc": {
          "line": 608,
          "column": 81,
          "position": 5777
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/controller/HomeController.java",
        "start": 532,
        "end": 540,
        "startLoc": {
          "line": 532,
          "column": 13,
          "position": 4838
        },
        "endLoc": {
          "line": 540,
          "column": 38,
          "position": 4925
        }
      }
    },
    {
      "format": "java",
      "lines": 7,
      "fragment": "package com.williamcallahan.book_recommendation_engine.controller;\n\nimport org.springframework.web.bind.annotation.ControllerAdvice;\nimport org.springframework.web.bind.annotation.ModelAttribute;\nimport org.springframework.web.bind.annotation.RequestParam;\n\nimport com.williamcallahan.book_recommendation_engine.model.image.CoverImageSource",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/controller/BookCoverPreferenceController.java",
        "start": 1,
        "end": 7,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 7,
          "column": 17,
          "position": 70
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/controller/ImageResolutionPreferenceController.java",
        "start": 1,
        "end": 7,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 7,
          "column": 26,
          "position": 70
        }
      }
    },
    {
      "format": "java",
      "lines": 9,
      "fragment": " Mono<Book> byId = bookDataOrchestrator.getBookByIdTiered(identifier);\n        Mono<Book> bySlug = Mono.defer(() -> {\n            Mono<Book> lookup = bookDataOrchestrator.getBookBySlugTiered(identifier);\n            return lookup == null ? Mono.empty() : lookup;\n        ",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/controller/BookController.java",
        "start": 111,
        "end": 119,
        "startLoc": {
          "line": 111,
          "column": 11,
          "position": 1300
        },
        "endLoc": {
          "line": 119,
          "column": 15,
          "position": 1382
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/service/RecommendationService.java",
        "start": 138,
        "end": 146,
        "startLoc": {
          "line": 138,
          "column": 2,
          "position": 1000
        },
        "endLoc": {
          "line": 146,
          "column": 5,
          "position": 1082
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": "package com.williamcallahan.book_recommendation_engine.config;\n\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.actuate.health.Health;\nimport org.springframework.boot.actuate.health.ReactiveHealthIndicator;\nimport org.springframework.boot",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/config/SearchPageHealthIndicator.java",
        "start": 12,
        "end": 17,
        "startLoc": {
          "line": 12,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 17,
          "column": 5,
          "position": 65
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/config/WebPageHealthIndicator.java",
        "start": 15,
        "end": 20,
        "startLoc": {
          "line": 15,
          "column": 1,
          "position": 2
        },
        "endLoc": {
          "line": 20,
          "column": 11,
          "position": 65
        }
      }
    },
    {
      "format": "java",
      "lines": 6,
      "fragment": ";\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.actuate.health.Health;\nimport org.springframework.boot.actuate.health.ReactiveHealthIndicator;\nimport org.springframework.stereotype.Component;\nimport reactor",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/config/S3HealthIndicator.java",
        "start": 3,
        "end": 8,
        "startLoc": {
          "line": 3,
          "column": 10,
          "position": 25
        },
        "endLoc": {
          "line": 8,
          "column": 8,
          "position": 85
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/config/WebPageHealthIndicator.java",
        "start": 15,
        "end": 21,
        "startLoc": {
          "line": 15,
          "column": 7,
          "position": 11
        },
        "endLoc": {
          "line": 21,
          "column": 4,
          "position": 72
        }
      }
    },
    {
      "format": "java",
      "lines": 35,
      "fragment": "// Manual parsing to handle postgres:// format properly\n            // Format: postgres://username:password@host:port/database?params\n            String withoutScheme = url.substring(url.indexOf(\"://\") + 3);\n\n            String username = null;\n            String password = null;\n            String hostPart;\n\n            // Check if credentials are present\n            if (withoutScheme.contains(\"@\")) {\n                String[] parts = withoutScheme.split(\"@\", 2);\n                String userInfo = parts[0];\n                hostPart = parts[1];\n\n                // Extract username and password\n                if (userInfo.contains(\":\")) {\n                    int colonIndex = userInfo.indexOf(\":\");\n                    username = userInfo.substring(0, colonIndex);\n                    password = userInfo.substring(colonIndex + 1);\n                } else {\n                    username = userInfo;\n                }\n            } else {\n                hostPart = withoutScheme;\n            }\n\n            // Parse host, port, database, and query params\n            String host;\n            int port = 5432;\n            String database = \"postgres\";\n            String query = null;\n\n            // Split by ? to separate query params\n            if (hostPart.contains(\"?\")) {\n                String[] parts",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/BookRecommendationEngineApplication.java",
        "start": 99,
        "end": 133,
        "startLoc": {
          "line": 99,
          "column": 13,
          "position": 814
        },
        "endLoc": {
          "line": 133,
          "column": 6,
          "position": 1097
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/config/DatabaseUrlEnvironmentPostProcessor.java",
        "start": 48,
        "end": 82,
        "startLoc": {
          "line": 48,
          "column": 13,
          "position": 413
        },
        "endLoc": {
          "line": 82,
          "column": 11,
          "position": 696
        }
      }
    },
    {
      "format": "java",
      "lines": 42,
      "fragment": "[1];\n\n                // Extract host and port\n                if (hostPortPart.contains(\":\")) {\n                    String[] hostPortSplit = hostPortPart.split(\":\", 2);\n                    host = hostPortSplit[0];\n                    try {\n                        port = Integer.parseInt(hostPortSplit[1]);\n                    } catch (NumberFormatException e) {\n                        port = 5432;\n                    }\n                } else {\n                    host = hostPortPart;\n                }\n            } else {\n                // No database specified in URL\n                if (hostPart.contains(\":\")) {\n                    String[] hostPortSplit = hostPart.split(\":\", 2);\n                    host = hostPortSplit[0];\n                    try {\n                        port = Integer.parseInt(hostPortSplit[1]);\n                    } catch (NumberFormatException e) {\n                        port = 5432;\n                    }\n                } else {\n                    host = hostPart;\n                }\n            }\n\n            // Build JDBC URL\n            StringBuilder jdbc = new StringBuilder()\n                    .append(\"jdbc:postgresql://\")\n                    .append(host)\n                    .append(\":\")\n                    .append(port)\n                    .append(\"/\")\n                    .append(database);\n            if (query != null && !query.isBlank()) {\n                jdbc.append(\"?\").append(query);\n            }\n\n            String",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/BookRecommendationEngineApplication.java",
        "start": 142,
        "end": 183,
        "startLoc": {
          "line": 142,
          "column": 6,
          "position": 1194
        },
        "endLoc": {
          "line": 183,
          "column": 7,
          "position": 1533
        }
      },
      "secondFile": {
        "name": "src/main/java/com/williamcallahan/book_recommendation_engine/config/DatabaseUrlEnvironmentPostProcessor.java",
        "start": 91,
        "end": 132,
        "startLoc": {
          "line": 91,
          "column": 8,
          "position": 793
        },
        "endLoc": {
          "line": 132,
          "column": 4,
          "position": 1132
        }
      }
    },
    {
      "format": "json",
      "lines": 98,
      "fragment": "{\n  \"kind\": \"books#volume\",\n  \"id\": \"Hn41AgAAQBAJ\",\n  \"etag\": \"RaWpBpS2R7c\",\n  \"selfLink\": \"https://www.googleapis.com/books/v1/volumes/Hn41AgAAQBAJ\",\n  \"volumeInfo\": {\n    \"title\": \"To Kill a Mockingbird\",\n    \"authors\": [\n      \"Harper Lee\"\n    ],\n    \"publisher\": \"Harper Collins\",\n    \"publishedDate\": \"2014-07-08\",\n    \"description\": \"Voted America's Best-Loved Novel in PBS's The Great American Read Harper Lee's Pulitzer Prize-winning masterwork of honor and injustice in the deep Southand the heroism of one man in the face of blind and violent hatred One of the most cherished stories of all time, To Kill a Mockingbird has been translated into more than forty languages, sold more than forty million copies worldwide, served as the basis for an enormously popular motion picture, and was voted one of the best novels of the twentieth century by librarians across the country. A gripping, heart-wrenching, and wholly remarkable tale of coming-of-age in a South poisoned by virulent prejudice, it views a world of great beauty and savage inequities through the eyes of a young girl, as her fathera crusading local lawyerrisks everything to defend a black man unjustly accused of a terrible crime.\",\n    \"industryIdentifiers\": [\n      {\n        \"type\": \"ISBN_13\",\n        \"identifier\": \"9780062368683\"\n      },\n      {\n        \"type\": \"ISBN_10\",\n        \"identifier\": \"0062368680\"\n      }\n    ],\n    \"readingModes\": {\n      \"text\": true,\n      \"image\": false\n    },\n    \"pageCount\": 336,\n    \"printType\": \"BOOK\",\n    \"categories\": [\n      \"Fiction\"\n    ],\n    \"averageRating\": 4,\n    \"ratingsCount\": 3838,\n    \"maturityRating\": \"NOT_MATURE\",\n    \"allowAnonLogging\": true,\n    \"contentVersion\": \"1.12.12.0.preview.2\",\n    \"panelizationSummary\": {\n      \"containsEpubBubbles\": false,\n      \"containsImageBubbles\": false\n    },\n    \"imageLinks\": {\n      \"smallThumbnail\": \"http://books.google.com/books/content?id=Hn41AgAAQBAJ&printsec=frontcover&img=1&zoom=5&edge=curl&source=gbs_api\",\n      \"thumbnail\": \"http://books.google.com/books/content?id=Hn41AgAAQBAJ&printsec=frontcover&img=1&zoom=1&edge=curl&source=gbs_api\"\n    },\n    \"language\": \"en\",\n    \"previewLink\": \"http://books.google.com/books?id=Hn41AgAAQBAJ&printsec=frontcover&dq=to+kill+a+mockingbird&hl=&cd=1&source=gbs_api\",\n    \"infoLink\": \"https://play.google.com/store/books/details?id=Hn41AgAAQBAJ&source=gbs_api\",\n    \"canonicalVolumeLink\": \"https://play.google.com/store/books/details?id=Hn41AgAAQBAJ\"\n  },\n  \"saleInfo\": {\n    \"country\": \"US\",\n    \"saleability\": \"FOR_SALE\",\n    \"isEbook\": true,\n    \"listPrice\": {\n      \"amount\": 12.99,\n      \"currencyCode\": \"USD\"\n    },\n    \"retailPrice\": {\n      \"amount\": 12.99,\n      \"currencyCode\": \"USD\"\n    },\n    \"buyLink\": \"https://play.google.com/store/books/details?id=Hn41AgAAQBAJ&rdid=book-Hn41AgAAQBAJ&rdot=1&source=gbs_api\",\n    \"offers\": [\n      {\n        \"finskyOfferType\": 1,\n        \"listPrice\": {\n          \"amountInMicros\": 12990000,\n          \"currencyCode\": \"USD\"\n        },\n        \"retailPrice\": {\n          \"amountInMicros\": 12990000,\n          \"currencyCode\": \"USD\"\n        },\n        \"giftable\": true\n      }\n    ]\n  },\n  \"accessInfo\": {\n    \"country\": \"US\",\n    \"viewability\": \"PARTIAL\",\n    \"embeddable\": true,\n    \"publicDomain\": false,\n    \"textToSpeechPermission\": \"ALLOWED\",\n    \"epub\": {\n      \"isAvailable\": true,\n      \"acsTokenLink\": \"http://books.google.com/books/download/To_Kill_a_Mockingbird-sample-epub.acsm?id=Hn41AgAAQBAJ&format=epub&output=acs4_fulfillment_token&dl_type=sample&source=gbs_api\"\n    },\n    \"pdf\": {\n      \"isAvailable\": false\n    },\n    \"webReaderLink\": \"http://play.google.com/books/reader?id=Hn41AgAAQBAJ&hl=&printsec=frontcover&source=gbs_api\",\n    \"accessViewStatus\": \"SAMPLE\",\n    \"quoteSharingAllowed\": false\n  },\n  \"searchInfo\": {\n    \"textSnippet\": \"Voted America's Best-Loved Novel in PBS's The Great American Read Harper Lee's Pulitzer Prize-winning masterwork of honor and injustice in the deep Southand the heroism of one man in the face of blind and violent hatred One of the ...\"\n  },",
      "tokens": 0,
      "firstFile": {
        "name": "src/test/resources/mock-responses/books/Hn41AgAAQBAJ.json",
        "start": 1,
        "end": 98,
        "startLoc": {
          "line": 1,
          "column": 1,
          "position": 0
        },
        "endLoc": {
          "line": 98,
          "column": 2,
          "position": 564
        }
      },
      "secondFile": {
        "name": "src/test/resources/mock-responses/searches/to_kill_a_mockingbird.json",
        "start": 5,
        "end": 103,
        "startLoc": {
          "line": 5,
          "column": 5,
          "position": 23
        },
        "endLoc": {
          "line": 103,
          "column": 2,
          "position": 589
        }
      }
    },
    {
      "format": "css",
      "lines": 12,
      "fragment": "--button-viewall-bg: var(--button-primary-bg);\n  --button-viewall-text: var(--button-primary-text);\n  --button-viewall-hover-bg: var(--button-primary-hover-bg);\n  --button-viewall-outlined-text: var(--button-outline-primary-text);\n  --button-viewall-outlined-border: var(--button-outline-primary-border);\n  --button-viewall-outlined-hover-bg: var(--button-outline-primary-hover-bg);\n  --button-viewall-outlined-hover-text: var(--button-outline-primary-hover-text);\n\n  --search-button-hero-bg: var(--hero-search-button-bg);\n  --search-button-hero-text: var(--hero-search-button-text);\n  --search-button-hero-hover-bg: var(--hero-search-button-hover-bg);\n}",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/resources/static/css/variables.css",
        "start": 208,
        "end": 219,
        "startLoc": {
          "line": 208,
          "column": 3,
          "position": 1650
        },
        "endLoc": {
          "line": 219,
          "column": 2,
          "position": 1750
        }
      },
      "secondFile": {
        "name": "src/main/resources/static/css/variables.css",
        "start": 112,
        "end": 124,
        "startLoc": {
          "line": 112,
          "column": 3,
          "position": 869
        },
        "endLoc": {
          "line": 124,
          "column": 22,
          "position": 972
        }
      }
    },
    {
      "format": "markup",
      "lines": 27,
      "fragment": "\" th:with=\"bookSlug=${book.slug != null ? book.slug : book.id}\" class=\"col-sm-6 col-md-4 col-lg-3\">\n                    <div class=\"card h-100\">\n                        <div class=\"position-relative book-cover-container\">\n                            <a th:href=\"@{'/book/' + ${bookSlug}}\" class=\"d-block h-100\">\n                                <img th:src=\"${book.coverImages != null && book.coverImages.preferredUrl != null ? book.coverImages.preferredUrl : (book.s3ImagePath != null ? book.s3ImagePath : (book.externalImageUrl != null ? book.externalImageUrl : '/images/placeholder-book-cover.svg'))}\"\n                                     class=\"card-img-top book-cover\"\n                                     loading=\"lazy\"\n                                     alt=\"Book cover\" \n                                     title=\"Book cover\"\n                                     th:alt=\"${book.title != null ? book.title + ' cover' : 'Book cover'}\"\n                                     th:title=\"${book.title != null ? book.title + ' cover' : 'Book cover'}\"\n                                     th:attr=\"data-book-id=${book.id}, \n                                              data-preferred-url=${book.coverImages != null && book.coverImages.preferredUrl != null ? book.coverImages.preferredUrl : (book.s3ImagePath != null ? book.s3ImagePath : book.externalImageUrl)},\n                                              data-fallback-url=${book.coverImages != null && book.coverImages.fallbackUrl != null ? book.coverImages.fallbackUrl : '/images/placeholder-book-cover.svg'}, \n                                              data-ultimate-fallback='/images/placeholder-book-cover.svg'\">\n                            </a>\n                            <div th:if=\"${book.averageRating != null}\" class=\"position-absolute top-0 end-0 m-2 badge bg-warning text-dark\">\n                                <i class=\"fas fa-star me-1\"></i>\n                                <span th:text=\"${book.averageRating}\">4.5</span>\n                            </div>\n                        </div>\n                        <div class=\"card-body\">\n                            <h5 class=\"card-title text-truncate\">\n                                <a th:href=\"@{'/book/' + ${bookSlug}}\" th:text=\"${book.title}\" class=\"text-decoration-none text-dark\">Book Title</a>\n                            </h5>\n                            <p class=\"card-text small text-muted text-truncate\" th:text=\"${book.authors != null && !book.authors.empty} ? ${book.authors[0]} : 'Unknown Author'\">Author Name</p>\n                            <",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/resources/templates/index.html",
        "start": 121,
        "end": 147,
        "startLoc": {
          "line": 121,
          "column": 22,
          "position": 1262
        },
        "endLoc": {
          "line": 147,
          "column": 2,
          "position": 1559
        }
      },
      "secondFile": {
        "name": "src/main/resources/templates/index.html",
        "start": 68,
        "end": 94,
        "startLoc": {
          "line": 68,
          "column": 29,
          "position": 707
        },
        "endLoc": {
          "line": 94,
          "column": 3,
          "position": 1004
        }
      }
    },
    {
      "format": "markup",
      "lines": 11,
      "fragment": "</p>\n                        </div>\n                        <div class=\"card-footer bg-white border-top-0\">\n                            <a th:href=\"@{'/book/' + ${bookSlug}}\" class=\"btn btn-sm btn-outline-primary d-block\">View Details</a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n</",
      "tokens": 0,
      "firstFile": {
        "name": "src/main/resources/templates/index.html",
        "start": 162,
        "end": 172,
        "startLoc": {
          "line": 162,
          "column": 2,
          "position": 1778
        },
        "endLoc": {
          "line": 172,
          "column": 3,
          "position": 1856
        }
      },
      "secondFile": {
        "name": "src/main/resources/templates/index.html",
        "start": 93,
        "end": 104,
        "startLoc": {
          "line": 93,
          "column": 5,
          "position": 999
        },
        "endLoc": {
          "line": 104,
          "column": 30,
          "position": 1079
        }
      }
    },
    {
      "format": "markup",
      "lines": 7,
      "fragment": "\" />\n      <option name=\"TEST_OBJECT\" value=\"class\" />\n      <method v=\"2\">\n        <option name=\"Make\" enabled=\"true\" />\n      </method>\n    </configuration>\n    <configuration name=\"BookControllerTest.getBookById_found_returnsBook",
      "tokens": 0,
      "firstFile": {
        "name": ".idea/workspace.xml",
        "start": 289,
        "end": 295,
        "startLoc": {
          "line": 289,
          "column": 77,
          "position": 5767
        },
        "endLoc": {
          "line": 295,
          "column": 49,
          "position": 5835
        }
      },
      "secondFile": {
        "name": ".idea/workspace.xml",
        "start": 274,
        "end": 280,
        "startLoc": {
          "line": 274,
          "column": 80,
          "position": 5565
        },
        "endLoc": {
          "line": 280,
          "column": 19,
          "position": 5633
        }
      }
    },
    {
      "format": "markup",
      "lines": 11,
      "fragment": "\" type=\"JUnit\" factoryName=\"JUnit\" temporary=\"true\" nameIsGenerated=\"true\">\n      <module name=\"book_recommendation_engine\" />\n      <extension name=\"coverage\">\n        <pattern>\n          <option name=\"PATTERN\" value=\"com.williamcallahan.book_recommendation_engine.controller.*\" />\n          <option name=\"ENABLED\" value=\"true\" />\n        </pattern>\n      </extension>\n      <option name=\"PACKAGE_NAME\" value=\"com.williamcallahan.book_recommendation_engine.controller\" />\n      <option name=\"MAIN_CLASS_NAME\" value=\"com.williamcallahan.book_recommendation_engine.controller.BookControllerTest\" />\n      <option name=\"METHOD_NAME",
      "tokens": 0,
      "firstFile": {
        "name": ".idea/workspace.xml",
        "start": 295,
        "end": 305,
        "startLoc": {
          "line": 295,
          "column": 49,
          "position": 5836
        },
        "endLoc": {
          "line": 305,
          "column": 12,
          "position": 5980
        }
      },
      "secondFile": {
        "name": ".idea/workspace.xml",
        "start": 265,
        "end": 290,
        "startLoc": {
          "line": 265,
          "column": 25,
          "position": 5432
        },
        "endLoc": {
          "line": 290,
          "column": 12,
          "position": 5778
        }
      }
    },
    {
      "format": "markup",
      "lines": 7,
      "fragment": "\" />\n      <option name=\"TEST_OBJECT\" value=\"class\" />\n      <method v=\"2\">\n        <option name=\"Make\" enabled=\"true\" />\n      </method>\n    </configuration>\n    <configuration name=\"GracefulShutdownTest",
      "tokens": 0,
      "firstFile": {
        "name": ".idea/workspace.xml",
        "start": 320,
        "end": 326,
        "startLoc": {
          "line": 320,
          "column": 80,
          "position": 6189
        },
        "endLoc": {
          "line": 326,
          "column": 21,
          "position": 6257
        }
      },
      "secondFile": {
        "name": ".idea/workspace.xml",
        "start": 274,
        "end": 280,
        "startLoc": {
          "line": 274,
          "column": 80,
          "position": 5565
        },
        "endLoc": {
          "line": 280,
          "column": 19,
          "position": 5633
        }
      }
    },
    {
      "format": "markup",
      "lines": 10,
      "fragment": "\" type=\"JUnit\" factoryName=\"JUnit\" temporary=\"true\" nameIsGenerated=\"true\">\n      <module name=\"book_recommendation_engine\" />\n      <extension name=\"coverage\">\n        <pattern>\n          <option name=\"PATTERN\" value=\"com.williamcallahan.book_recommendation_engine.config.*\" />\n          <option name=\"ENABLED\" value=\"true\" />\n        </pattern>\n      </extension>\n      <option name=\"PACKAGE_NAME\" value=\"com.williamcallahan.book_recommendation_engine.config\" />\n      <option name=\"MAIN_CLASS_NAME\" value=\"com.williamcallahan.book_recommendation_engine.config.GracefulShutdownTest",
      "tokens": 0,
      "firstFile": {
        "name": ".idea/workspace.xml",
        "start": 326,
        "end": 335,
        "startLoc": {
          "line": 326,
          "column": 21,
          "position": 6258
        },
        "endLoc": {
          "line": 335,
          "column": 75,
          "position": 6390
        }
      },
      "secondFile": {
        "name": ".idea/workspace.xml",
        "start": 265,
        "end": 320,
        "startLoc": {
          "line": 265,
          "column": 25,
          "position": 5432
        },
        "endLoc": {
          "line": 320,
          "column": 80,
          "position": 6188
        }
      }
    },
    {
      "format": "markup",
      "lines": 7,
      "fragment": "\" />\n      <option name=\"TEST_OBJECT\" value=\"class\" />\n      <method v=\"2\">\n        <option name=\"Make\" enabled=\"true\" />\n      </method>\n    </configuration>\n    <configuration name=\"BookRecommendationEngineApplication",
      "tokens": 0,
      "firstFile": {
        "name": ".idea/workspace.xml",
        "start": 335,
        "end": 341,
        "startLoc": {
          "line": 335,
          "column": 75,
          "position": 6391
        },
        "endLoc": {
          "line": 341,
          "column": 36,
          "position": 6459
        }
      },
      "secondFile": {
        "name": ".idea/workspace.xml",
        "start": 274,
        "end": 280,
        "startLoc": {
          "line": 274,
          "column": 80,
          "position": 5565
        },
        "endLoc": {
          "line": 280,
          "column": 19,
          "position": 5633
        }
      }
    },
    {
      "format": "markdown",
      "lines": 46,
      "fragment": "ent Operations Manual\n\n## 1. Purpose & Scope\n\n- Provide a single, current reference for anyone (human or AI) working in this repository.\n- Eliminate ambiguity by defining how work is planned, executed, documented, and verified.\n\n## 2. Actors & Responsibility\n\n- **User**: Defines requirements, prioritises work, approves changes, and ultimately owns all outcomes.\n- **AI Agent**: Executes only the work the User authorises and keeps all artefacts aligned with this manual.\n\n## 3. Core Operating Principles\n\n1. **User-Directed Tasks**: Treat the User's request as the source of truth. Capture additional context only when the User asks for it.\n2. **Scope Confirmation**: Clarify uncertainties before modifying code. If requirements shift mid-task, confirm the new scope with the User.\n3. **Traceability**: Reference the current request in code comments, commits, and conversation summaries so decisions stay attributable to the User.\n4. **Minimal Bureaucracy**: Backlog and task files are optional. Maintain or create documentation only when the User explicitly requests it.\n5. **Single Source of Truth**: Keep information in one place. If you create notes or docs, link to them instead of duplicating.\n6. **Controlled File Creation**: Create new files (including documentation) only when the User explicitly approves the specific file.\n7. **Named Constants**: Replace repeated literal values with descriptive constants in generated code.\n8. **Sense Check Data**: Validate data, requirements, and results for consistency before acting on them.\n\n## 4. Workflow & Scope Control\n\n- Start every change discussion by confirming you understand the User's request.\n- Keep the conversation focused on the agreed scope; call out scope creep as soon as you see it.\n- If you discover adjacent issues, surface them as optional follow-up ideas rather than expanding the active task.\n- When access or tooling limitations appear, pause and ask the User how to proceed instead of guessing.\n\n## 5. Work Tracking\n\n- Dedicated backlog/task artifacts are not required for day-to-day work.\n- When the User asks for work tracking, follow their preferred format (e.g., ad-hoc checklist, markdown file, issue link).\n- If historical docs already exist for a feature, update them only when you touch the feature and the User confirms they still matter.\n\n## 6. Testing Strategy\n\n- Apply risk-based testing and follow the test pyramid: unit at the base, integration for cross-component behaviour, E2E for critical flows.\n- Provide a lightweight test plan in your response when implementing code. Scale detail with risk.\n- Prefer automated tests; document any manual verification you perform or that remains outstanding.\n\n## 7. Change Management\n\n- Mention the current task/request ID (if one exists) in commits and pull requests; otherwise describe the user-visible change.\n- Summaries should highlight impacted components, testing performed, and follow-up considerations.\n- Do not revert o",
      "tokens": 0,
      "firstFile": {
        "name": "AGENTS.md",
        "start": 5,
        "end": 50,
        "startLoc": {
          "line": 5,
          "column": 1,
          "position": 4
        },
        "endLoc": {
          "line": 50,
          "column": 9,
          "position": 907
        }
      },
      "secondFile": {
        "name": "CLAUDE.md",
        "start": 5,
        "end": 50,
        "startLoc": {
          "line": 5,
          "column": 1,
          "position": 4
        },
        "endLoc": {
          "line": 50,
          "column": 9,
          "position": 907
        }
      }
    }
  ]
}